<!DOCTYPE html>
<html lang="zh-TW">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
Â  Â  <title>ä¿¡ç”¨å¡å›é¥‹æŸ¥è©¢åŠ©æ‰‹ 2026</title>
Â  Â  <style>
Â  Â  Â  Â  * { box-sizing: border-box; margin: 0; padding: 0; }
Â  Â  Â  Â  :root {
Â  Â  Â  Â  Â  Â  --color-primary: #2180a0;
Â  Â  Â  Â  Â  Â  --color-bg: #f5f5f5;
Â  Â  Â  Â  Â  Â  --color-surface: #ffffff;
Â  Â  Â  Â  Â  Â  --color-text: #333333;
Â  Â  Â  Â  Â  Â  --color-border: #e0e0e0;
Â  Â  Â  Â  Â  Â  --color-success: #2e7d32;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  /* === å“ç‰Œè‰²å®šç¾© (æœ€çµ‚ç¢ºèª) === */
Â  Â  Â  Â  Â  Â  --brand-richart: #e01a22; /* å°æ–°ç´… */
Â  Â  Â  Â  Â  Â  --brand-cube: #00AA4F;Â  Â  /* åœ‹æ³°ç¶  */
Â  Â  Â  Â  Â  Â  --brand-unicard: #1890ff; /* ç‰å±±è— */
Â  Â  Â  Â  Â  Â  --brand-ubear: #e6b800;Â  Â /* ç‰å±±é»ƒ */
Â  Â  Â  Â  Â  Â  --brand-dawho: #2d3436;Â  Â /* æ°¸è±é»‘ */
Â  Â  Â  Â  }

Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
Â  Â  Â  Â  Â  Â  background-color: var(--color-bg);
Â  Â  Â  Â  Â  Â  color: var(--color-text);
Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  Â  Â  line-height: 1.6;
Â  Â  Â  Â  Â  Â  padding-bottom: 90px;
Â  Â  Â  Â  Â  Â  -webkit-tap-highlight-color: transparent;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .container { max-width: 800px; margin: 0 auto; }
Â  Â  Â  Â  h1 { text-align: center; margin-bottom: 15px; color: var(--color-primary); font-size: 1.6em; }

Â  Â  Â  Â  /* === å°è¦½åˆ— === */
Â  Â  Â  Â  .nav-tabs {
Â  Â  Â  Â  Â  Â  display: flex; background: var(--color-surface); padding: 5px;
Â  Â  Â  Â  Â  Â  border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);
Â  Â  Â  Â  Â  Â  margin-bottom: 20px; position: sticky; top: 10px; z-index: 900;
Â  Â  Â  Â  Â  Â  transition: all 0.3s;
Â  Â  Â  Â  }
Â  Â  Â  Â  .nav-item {
Â  Â  Â  Â  Â  Â  flex: 1; text-align: center; padding: 12px; cursor: pointer;
Â  Â  Â  Â  Â  Â  border-radius: 8px; font-weight: 600; color: #888; transition: all 0.2s;
Â  Â  Â  Â  Â  Â  display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 4px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .nav-icon { font-size: 1.2em; margin-bottom: 2px; display: none; }
Â  Â  Â  Â  .nav-item.active { background-color: var(--color-primary); color: white; box-shadow: 0 2px 4px rgba(33, 128, 160, 0.3); }

Â  Â  Â  Â  @media (max-width: 768px) {
Â  Â  Â  Â  Â  Â  .nav-tabs {
Â  Â  Â  Â  Â  Â  Â  Â  position: fixed; bottom: 0; top: auto; left: 0; right: 0;
Â  Â  Â  Â  Â  Â  Â  Â  margin-bottom: 0; border-radius: 0; padding: 8px 5px 20px 5px;
Â  Â  Â  Â  Â  Â  Â  Â  background: rgba(255, 255, 255, 0.95);
Â  Â  Â  Â  Â  Â  Â  Â  backdrop-filter: blur(10px);
Â  Â  Â  Â  Â  Â  Â  Â  border-top: 1px solid #eee;
Â  Â  Â  Â  Â  Â  Â  Â  box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  .nav-item { background: transparent !important; color: #999; padding: 4px; font-size: 0.75rem; }
Â  Â  Â  Â  Â  Â  .nav-item.active { color: var(--color-primary); box-shadow: none; }
Â  Â  Â  Â  Â  Â  .nav-icon { display: block; font-size: 1.4rem; }
Â  Â  Â  Â  Â  Â  .nav-text { margin-top: 2px; }
Â  Â  Â  Â  Â  Â  h1 { margin-top: 10px; font-size: 1.4em; }
Â  Â  Â  Â  Â  Â  body { padding-top: 10px; }
Â  Â  Â  Â  }

Â  Â  Â  Â  .tab-content { display: none; animation: fadeIn 0.3s ease-out; }
Â  Â  Â  Â  .tab-content.active { display: block; }
Â  Â  Â  Â  @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

Â  Â  Â  Â  /* === å€å¡Šæ¨£å¼ === */
Â  Â  Â  Â  .form-section {
Â  Â  Â  Â  Â  Â  background: var(--color-surface); padding: 20px;
Â  Â  Â  Â  Â  Â  border-radius: 12px; margin-bottom: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.05);
Â  Â  Â  Â  }
Â  Â  Â  Â  .info-text {
Â  Â  Â  Â  Â  Â  background: #e3f2fd; padding: 12px; border-radius: 8px; color: #0d47a1;
Â  Â  Â  Â  Â  Â  margin-bottom: 15px; font-size: 0.9em; line-height: 1.5; border-left: 4px solid #2196f3;
Â  Â  Â  Â  }
Â  Â  Â  Â  .form-group { margin-bottom: 15px; }
Â  Â  Â  Â  label { display: block; margin-bottom: 6px; font-weight: 600; color: var(--color-text); font-size: 0.95em; }
Â  Â  Â  Â  .input-wrapper { position: relative; display: flex; align-items: center; }
Â  Â  Â  Â  input[type="text"], input[type="number"], select {
Â  Â  Â  Â  Â  Â  width: 100%; padding: 12px 40px 12px 14px; border: 1px solid var(--color-border);
Â  Â  Â  Â  Â  Â  border-radius: 8px; font-size: 16px; background: #fff; appearance: none;
Â  Â  Â  Â  }
Â  Â  Â  Â  input:focus, select:focus { outline: none; border-color: var(--color-primary); box-shadow: 0 0 0 3px rgba(33, 128, 160, 0.1); }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .clear-btn {
Â  Â  Â  Â  Â  Â  position: absolute; right: 5px; background: #eee; border: none; border-radius: 50%;
Â  Â  Â  Â  Â  Â  width: 30px; height: 30px; cursor: pointer; color: #666; display: none; align-items: center; justify-content: center;
Â  Â  Â  Â  Â  Â  font-size: 14px;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .suggestion-dropdown {
Â  Â  Â  Â  Â  Â  position: absolute; top: 100%; left: 0; right: 0; background: var(--color-surface);
Â  Â  Â  Â  Â  Â  border: 1px solid var(--color-border); border-radius: 0 0 8px 8px;
Â  Â  Â  Â  Â  Â  max-height: 250px; overflow-y: auto; z-index: 1000; box-shadow: 0 4px 12px rgba(0,0,0,0.1); display: none;
Â  Â  Â  Â  }
Â  Â  Â  Â  .suggestion-item { padding: 12px 16px; cursor: pointer; border-bottom: 1px solid #f0f0f0; }
Â  Â  Â  Â  .suggestion-item:hover { background-color: #f5f9ff; }

Â  Â  Â  Â  .controls-row { display: flex; gap: 10px; margin-bottom: 15px; align-items: center; }
Â  Â  Â  Â  .control-group { flex: 1; }
Â  Â  Â  Â  .toggle-btn {
Â  Â  Â  Â  Â  Â  display: flex; align-items: center; justify-content: center; padding: 10px;
Â  Â  Â  Â  Â  Â  background: #fff; border: 1px solid var(--color-border); border-radius: 8px;
Â  Â  Â  Â  Â  Â  cursor: pointer; user-select: none; font-size: 0.9em; height: 46px; white-space: nowrap; transition: all 0.2s;
Â  Â  Â  Â  }
Â  Â  Â  Â  .toggle-btn.active { background: #e3f2fd; border-color: var(--color-primary); color: var(--color-primary); font-weight: 700; transform: scale(1.02); }
Â  Â  Â  Â  .toggle-checkbox { margin-right: 6px; width: 16px; height: 16px; pointer-events: none; }

Â  Â  Â  Â  /* === æœå°‹çµæœåˆ—è¡¨ === */
Â  Â  Â  Â  .merchant-list {
Â  Â  Â  Â  Â  Â  background: var(--color-surface); padding: 16px; border-radius: 12px; margin-bottom: 12px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: transform 0.2s; cursor: pointer;
Â  Â  Â  Â  Â  Â  border: 1px solid transparent; display: flex; justify-content: space-between; align-items: center;
Â  Â  Â  Â  Â  Â  border-left: 5px solid #ccc;
Â  Â  Â  Â  }
Â  Â  Â  Â  .merchant-list:hover { transform: translateY(-3px); box-shadow: 0 6px 15px rgba(0,0,0,0.1); }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* å“ç‰Œè‰² Class */
Â  Â  Â  Â  .card-theme-richart { border-left-color: var(--brand-richart) !important; }
Â  Â  Â  Â  .card-theme-cube { border-left-color: var(--brand-cube) !important; }
Â  Â  Â  Â  .card-theme-unicard { border-left-color: var(--brand-unicard) !important; }
Â  Â  Â  Â  .card-theme-ubear { border-left-color: var(--brand-ubear) !important; }
Â  Â  Â  Â  .card-theme-dawho { border-left-color: var(--brand-dawho) !important; }

Â  Â  Â  Â  .merchant-name { font-size: 1.1em; font-weight: 700; color: var(--color-text); }
Â  Â  Â  Â  .merchant-type { font-size: 0.85em; color: #888; background: #eee; padding: 2px 8px; border-radius: 10px; margin-left: 8px; }
Â  Â  Â  Â  .merchant-best-info { text-align: right; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* æœå°‹çµæœï¼šå›é¥‹ç‡ç¶­æŒè—è‰² */
Â  Â  Â  Â  .best-rate { color: var(--color-primary); font-weight: 800; font-size: 1.4em; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .best-card-name { font-size: 0.85em; color: #666; display: flex; align-items: center; justify-content: flex-end; gap: 4px; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* åœ–ç¤ºï¼š12px åœ“å½¢é» */
Â  Â  Â  Â  .card-icon-shape {Â 
Â  Â  Â  Â  Â  Â  width: 12px; height: 12px; border-radius: 50%;
Â  Â  Â  Â  Â  Â  display: inline-block; vertical-align: middle; margin-right: 8px;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* === Accordion (æ¬Šç›Šç¸½è¦½) === */
Â  Â  Â  Â  .card-accordion-item {
Â  Â  Â  Â  Â  Â  background: var(--color-surface); border-radius: 12px; margin-bottom: 12px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 2px 6px rgba(0,0,0,0.05); overflow: hidden; border: 1px solid var(--color-border);
Â  Â  Â  Â  Â  Â  border-left: 5px solid #ccc;
Â  Â  Â  Â  }
Â  Â  Â  Â  .accordion-header {
Â  Â  Â  Â  Â  Â  padding: 16px 20px; cursor: pointer; display: flex; justify-content: space-between; align-items: center;
Â  Â  Â  Â  Â  Â  background: white; transition: background 0.2s;
Â  Â  Â  Â  }
Â  Â  Â  Â  .card-title-row { display: flex; align-items: center; }
Â  Â  Â  Â  .card-title-text { font-weight: 700; font-size: 1.1em; color: var(--color-text); }
Â  Â  Â  Â  .chevron { transition: transform 0.3s; color: #999; }
Â  Â  Â  Â  .accordion-header.active .chevron { transform: rotate(180deg); }
Â  Â  Â  Â  .accordion-body { display: none; padding: 0; background: #fff; border-top: 1px solid #eee; }
Â  Â  Â  Â  .accordion-body.open { display: block; animation: slideDown 0.3s ease-out; }
Â  Â  Â  Â  @keyframes slideDown { from { opacity: 0; max-height: 0; } to { opacity: 1; max-height: 3000px; } }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .benefit-row { padding: 12px 20px; border-bottom: 1px solid #f0f0f0; display: flex; flex-direction: column; position: relative; }
Â  Â  Â  Â  .benefit-row:not(.no-action):hover { background-color: #f8fbff; cursor: pointer; }
Â  Â  Â  Â  .benefit-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2px; padding-right: 20px; }
Â  Â  Â  Â  .benefit-name { font-weight: 600; font-size: 1em; color: #444; }
Â  Â  Â  Â  .benefit-rate { font-weight: 700; color: var(--color-primary); font-size: 1.1em; }
Â  Â  Â  Â  .benefit-desc { font-size: 0.85em; color: #666; margin-top: 2px; padding-right: 20px; }

Â  Â  Â  Â  /* === å½ˆçª— === */
Â  Â  Â  Â  .detail-modal {
Â  Â  Â  Â  Â  Â  display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0;
Â  Â  Â  Â  Â  Â  background: rgba(0,0,0,0.6); z-index: 2000; justify-content: center; padding: 20px;
Â  Â  Â  Â  Â  Â  backdrop-filter: blur(4px);Â 
Â  Â  Â  Â  }
Â  Â  Â  Â  .detail-modal.show { display: flex; align-items: center; }
Â  Â  Â  Â  .detail-content {
Â  Â  Â  Â  Â  Â  background: var(--color-surface); border-radius: 16px; width: 100%; max-width: 500px;
Â  Â  Â  Â  Â  Â  display: flex; flex-direction: column; box-shadow: 0 10px 40px rgba(0,0,0,0.3);
Â  Â  Â  Â  Â  Â  max-height: 85vh; animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
Â  Â  Â  Â  }
Â  Â  Â  Â  @keyframes popIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }

Â  Â  Â  Â  .detail-header { padding: 15px 20px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; }
Â  Â  Â  Â  .detail-title h2 { font-size: 1.4em; color: var(--color-primary); margin: 0; }
Â  Â  Â  Â  .detail-close { background: #f0f0f0; border: none; width: 32px; height: 32px; border-radius: 50%; font-size: 20px; cursor: pointer; color: #666; }
Â  Â  Â  Â  .detail-body { padding: 20px; overflow-y: auto; }

Â  Â  Â  Â  .detail-category-group { margin-bottom: 20px; }
Â  Â  Â  Â  .detail-category-title {Â 
Â  Â  Â  Â  Â  Â  font-size: 0.95em; font-weight: 700; color: var(--color-text); margin-bottom: 10px;Â 
Â  Â  Â  Â  Â  Â  padding-left: 8px; border-left: 4px solid var(--color-primary);
Â  Â  Â  Â  }
Â  Â  Â  Â  .scheme-list-container { display: flex; flex-wrap: wrap; gap: 8px; }
Â  Â  Â  Â  .scheme-list-item {Â 
Â  Â  Â  Â  Â  Â  background: var(--tag-bg); padding: 6px 12px; border-radius: 20px;Â 
Â  Â  Â  Â  Â  Â  font-size: 0.9em; color: var(--tag-text); border: 1px solid #e0e0e0; display: inline-block;
Â  Â  Â  Â  }

Â  Â  Â  Â  .detail-card-item { margin-bottom: 12px; border: 1px solid #eee; border-radius: 12px; overflow: hidden; border-left: 4px solid #ccc; }
Â  Â  Â  Â  .detail-card-item.best-card { background-color: #fafffc; }
Â  Â  Â  Â  .detail-card-header { padding: 10px 15px; background: #f9f9f9; font-weight: 600; display: flex; justify-content: space-between; align-items: center; }
Â  Â  Â  Â  .detail-card-body { padding: 12px 15px; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .scheme-badge {
Â  Â  Â  Â  Â  Â  display: inline-block; background-color: #eee; color: #555;
Â  Â  Â  Â  Â  Â  padding: 3px 10px; border-radius: 12px; font-size: 0.85em; font-weight: 700;
Â  Â  Â  Â  }
Â  Â  Â  Â  .scheme-badge.crazy { background-color: #ffebee; color: #c62828; }
Â  Â  Â  Â  .scheme-badge.new-user { background-color: #fff3e0; color: #e65100; }
Â  Â  Â  Â  .plan-warning { color: var(--color-danger); font-weight: 600; font-size: 0.85em; margin-top: 6px; display: flex; align-items: center; padding-top: 6px; border-top: 1px dashed rgba(0,0,0,0.1); }
Â  Â  Â  Â  .plan-warning::before { content: 'âš ï¸'; margin-right: 4px; }

Â  Â  Â  Â  .category-tags { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px; }
Â  Â  Â  Â  .category-tag {
Â  Â  Â  Â  Â  Â  padding: 6px 14px; background: var(--color-surface);
Â  Â  Â  Â  Â  Â  border: 1px solid var(--color-border); border-radius: 20px;
Â  Â  Â  Â  Â  Â  cursor: pointer; font-size: 0.9em; color: var(--color-text); font-weight: 500;
Â  Â  Â  Â  Â  Â  transition: all 0.2s; user-select: none;
Â  Â  Â  Â  }
Â  Â  Â  Â  .category-tag:hover { border-color: var(--color-primary); color: var(--color-primary); background: #e3f2fd; }
Â  Â  Â  Â  .category-tag.active { background: var(--color-primary); color: white; border-color: var(--color-primary); }

Â  Â  Â  Â  /* === è©¦ç®—çµæœæ¨£å¼ === */
Â  Â  Â  Â  .calc-result-item {Â 
Â  Â  Â  Â  Â  Â  margin-bottom: 12px; padding: 15px; background: white;Â 
Â  Â  Â  Â  Â  Â  border: 1px solid #eee; border-radius: 12px; border-left: 5px solid #ccc;
Â  Â  Â  Â  Â  Â  transition: transform 0.2s;
Â  Â  Â  Â  }
Â  Â  Â  Â  .calc-result-item.winner {Â 
Â  Â  Â  Â  Â  Â  background: #ffffff;Â 
Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 15px rgba(0,0,0,0.08);
Â  Â  Â  Â  Â  Â  border: 1px solid rgba(0,0,0,0.05);
Â  Â  Â  Â  }

Â  Â  Â  Â  .calc-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* ä¿®æ­£ï¼šé è¨­çš†ç‚ºé»‘è‰² (ç¬¬2åä»¥å¾Œ) */
Â  Â  Â  Â  .calc-money { font-size: 1.5em; font-weight: 800; color: #333; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* åªæœ‰å† è» (Winner) æ‰é¡¯ç¤ºå“ç‰Œè‰² */
Â  Â  Â  Â  .calc-result-item.winner.card-theme-richart .calc-money { color: var(--brand-richart); }
Â  Â  Â  Â  .calc-result-item.winner.card-theme-cube .calc-money { color: var(--brand-cube); }
Â  Â  Â  Â  .calc-result-item.winner.card-theme-unicard .calc-money { color: var(--brand-unicard); }
Â  Â  Â  Â  .calc-result-item.winner.card-theme-ubear .calc-money { color: #b8860b; }Â 
Â  Â  Â  Â  .calc-result-item.winner.card-theme-dawho .calc-money { color: var(--brand-dawho); }

Â  Â  Â  Â  .calc-detail { font-size: 0.85em; color: #666; background: rgba(0,0,0,0.03); padding: 8px; border-radius: 6px; margin-top: 8px; font-family: monospace; }
Â  Â  Â  Â  .upgrade-tip { background-color: #fff3e0; color: #e65100; padding: 8px 12px; border-radius: 8px; font-size: 0.85em; margin-top: 8px; font-weight: 600; border: 1px solid #ffe0b2; }

Â  Â  Â  Â  .action-btn { width:100%; padding:14px; background:var(--color-primary); color:white; border:none; border-radius:12px; font-weight:700; margin-top:10px; font-size:1.1em; box-shadow: 0 4px 10px rgba(33, 128, 160, 0.3); transition: transform 0.1s; }
Â  Â  Â  Â  .action-btn:active { transform: scale(0.98); }

Â  Â  </style>
</head>
<body>
Â  Â  <div class="container">
Â  Â  Â  Â  <h1>ğŸ’³ ä¿¡ç”¨å¡å›é¥‹æŸ¥è©¢ 2026</h1>

Â  Â  Â  Â  <div class="nav-tabs">
Â  Â  Â  Â  Â  Â  <div class="nav-item active" onclick="switchTab('search')">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="nav-icon">ğŸ”</span><span class="nav-text">é€šè·¯æœå°‹</span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="nav-item" onclick="switchTab('overview')">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="nav-icon">ğŸ“‹</span><span class="nav-text">æ¬Šç›Šç¸½è¦½</span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="nav-item" onclick="switchTab('calculator')">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="nav-icon">ğŸ’°</span><span class="nav-text">å›é¥‹è©¦ç®—</span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div id="tab-search" class="tab-content active">
Â  Â  Â  Â  Â  Â  <div class="form-section">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="info-text">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  âœ¨ <strong>2026 æ–°æˆ¶åŠ ç¢¼</strong>ï¼šUnicard æœ€é«˜ 7.5%ã€UBear ç¶²è³¼ 10%ã€‚
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="input-wrapper">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="searchMerchant" placeholder="è¼¸å…¥å•†å®¶ (å¦‚ï¼šå…¨å®¶ã€é«˜éµ)..." autocomplete="off">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button id="clearSearchBtn" class="clear-btn" onclick="clearSearch('searchMerchant', 'clearSearchBtn', true)">âœ•</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="suggestionDropdown" class="suggestion-dropdown"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="controls-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="control-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="searchUnicardScheme" onchange="debouncedReSearch()">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="any" selected>Unicard: ä»»æ„é¸ (3.5%)</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="simple">Unicard: ç°¡å–®é¸ (3.0%)</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="up">Unicard: UPé¸ (4.5%)</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="toggle-btn" id="searchNewUserBtn" onclick="toggleSearchNewUser()">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="checkbox" id="searchNewUser" class="toggle-checkbox" readonly>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>æˆ‘æ˜¯æ–°æˆ¶</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  <div style="margin-top: 10px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="category-tags" id="quickCategoryTags"></div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div id="merchantResults" class="results-section">
Â  Â  Â  Â  Â  Â  Â  Â  <div id="merchantContainer"></div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div id="tab-overview" class="tab-content">
Â  Â  Â  Â  Â  Â  <div id="cardOverviewContainer"></div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div id="tab-calculator" class="tab-content">
Â  Â  Â  Â  Â  Â  <div class="form-section">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>æ¶ˆè²»é‡‘é¡</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="input-wrapper">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" id="calcAmount" placeholder="è¼¸å…¥é‡‘é¡ (å¦‚ï¼š20000)" inputmode="numeric">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>æ¶ˆè²»é€šè·¯</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="input-wrapper">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="calcMerchant" placeholder="è¼¸å…¥é€šè·¯ (å¦‚ï¼šè¦çš®è³¼ç‰©)" autocomplete="off">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button id="clearCalcBtn" class="clear-btn" onclick="clearSearch('calcMerchant', 'clearCalcBtn', false)">âœ•</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="calcSuggestionDropdown" class="suggestion-dropdown"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="controls-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="control-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="calcUnicardScheme">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="any" selected>Unicard: ä»»æ„é¸ (3.5%)</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="simple">Unicard: ç°¡å–®é¸ (3.0%)</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="up">Unicard: UPé¸ (4.5%)</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="toggle-btn" id="calcNewUserBtn" onclick="toggleCalcNewUser()">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="checkbox" id="calcNewUser" class="toggle-checkbox" readonly>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>æˆ‘æ˜¯æ–°æˆ¶</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="calculateRewards()" class="action-btn">é–‹å§‹è©¦ç®—</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div id="calcResults"></div>
Â  Â  Â  Â  </div>

Â  Â  </div>

Â  Â  <div id="detailModal" class="detail-modal" onclick="if(event.target === this) closeDetailModal()">
Â  Â  Â  Â  <div class="detail-content">
Â  Â  Â  Â  Â  Â  <div class="detail-header">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="detail-title">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 id="modalTitle">æ–¹æ¡ˆè©³æƒ…</h2>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="detail-close" onclick="closeDetailModal()">âœ•</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div id="detailBody" class="detail-body"></div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <script>
Â  Â  Â  Â  const formatMoney = (num) => '$' + num.toLocaleString();
Â  Â  Â  Â  const formatRate = (num) => {
Â  Â  Â  Â  Â  Â  let fixed = parseFloat(num).toFixed(1);
Â  Â  Â  Â  Â  Â  return fixed.endsWith('.0') ? fixed.slice(0, -2) : fixed;
Â  Â  Â  Â  };
Â  Â  Â  Â Â 
Â  Â  Â  Â  // é˜²æŠ–å‹•å‡½å¼ (Debounce)
Â  Â  Â  Â  const debounce = (func, delay = 300) => {
Â  Â  Â  Â  Â  Â  let timer;
Â  Â  Â  Â  Â  Â  return (...args) => {
Â  Â  Â  Â  Â  Â  Â  Â  clearTimeout(timer);
Â  Â  Â  Â  Â  Â  Â  Â  timer = setTimeout(() => func(...args), delay);
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  };

Â  Â  Â  Â  const brandColorMap = {
Â  Â  Â  Â  Â  Â  'richart': { class: 'card-theme-richart', color: '#e01a22' },
Â  Â  Â  Â  Â  Â  'cube': { class: 'card-theme-cube', color: '#00AA4F' },Â  Â  /* åœ‹æ³°ç¶  */
Â  Â  Â  Â  Â  Â  'unicard': { class: 'card-theme-unicard', color: '#1890ff' }, /* ç‰å±±è— */
Â  Â  Â  Â  Â  Â  'ubear': { class: 'card-theme-ubear', color: '#e6b800' },
Â  Â  Â  Â  Â  Â  'dawho': { class: 'card-theme-dawho', color: '#2d3436' }
Â  Â  Â  Â  };

Â  Â  Â  Â  const cardBenefitsData = [
Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  id: 'richart', name: 'å°æ–° Richart', note: 'éœ€æ¯æ—¥ App åˆ‡æ›æ¬Šç›Š (ä¸€èˆ¬æ¶ˆç„¡ä¸Šé™/æ¬Šç›Šä¸Šé™æœ¬èº«é¡åº¦+30è¬)',
Â  Â  Â  Â  Â  Â  Â  Â  benefits: [
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: 'ä¸€èˆ¬æ¶ˆè²»', rate: 0.003, desc: 'åœ‹å…§å¤–ä¸€èˆ¬æ¶ˆè²»', type: 'text', note: '0.3%', categories: {} },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: 'Payè‘—åˆ·', rate: 0.038, desc: 'å°æ–°Pay(è¶…å•†/ç™¾è²¨) | IKEA | å°ç£å¤§è»ŠéšŠ', note: 'ä¸€èˆ¬0.3% + Payè‘—åˆ·3.5%', tag: 'pay', categories: { 'å°æ–°Pay':['7-11', 'å…¨å®¶ä¾¿åˆ©å•†åº—', 'æ–°å…‰ä¸‰è¶Š', 'Richart Mart', 'åº·æ˜¯ç¾', 'IKEA', 'NET'], 'å°ç£Pay':['ç¥è…¦', 'ç‡¦å¤', 'å…¨åœ‹é›»å­', 'éº¥ç•¶å‹', 'ç¾å»‰ç¤¾', 'å¤§æ¨¹è—¥å±€', 'æä¸€é†«ç™‚'], 'äº¤é€š':['å°ç£å¤§è»ŠéšŠ'] } },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: 'æ•¸è¶£åˆ·', rate: 0.033, desc: 'ç¶²è³¼ | éŠæˆ² | AIæœå‹™', note: 'ä¸€èˆ¬0.3% + æ•¸è¶£åˆ·3.5%', tag: 'digital', categories: { 'ç¶²è³¼å¹³å°':['è¦çš®è³¼ç‰©', 'momoè³¼ç‰©ç¶²', 'é…·æ¾(Coupang)', 'PChome', 'æ·˜å¯¶', 'Amazon', 'æ±æ£®', 'åšå®¢ä¾†', 'Richart Mart', 'PayEasy', 'iHerb', 'SHEIN', 'Farfetch', 'Olive Young'], 'ç·šä¸Šèª²ç¨‹':['çŸ¥è­˜è¡›æ˜Ÿ', 'Amazing Talker', 'Tutor ABC', 'Hahow', 'PressPlay'], 'éŠæˆ²å½±éŸ³':['MyCard', 'éŠæˆ²æ©˜å­', 'Steam', 'PlayStation', 'Nintendo', 'Netfilx', 'Disney+'], 'AIæœå‹™':['ChatGPT', 'Notion', 'Canva', 'Perplexity', 'Claude'] } },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: 'ç©æ—…åˆ·', rate: 0.033, desc: 'æµ·å¤– | èˆªç©º | è¨‚æˆ¿ | æ—…è¡Œç¤¾', note: 'ä¸€èˆ¬0.3% + ç©æ—…åˆ·3.5%', tag: 'travel', categories: { 'æµ·å¤–æ¶ˆè²»':['æµ·å¤–æ¶ˆè²»(å«å¯¦é«”)'], 'è¨‚æˆ¿å¹³å°':['Klook', 'KKday', 'Agoda', 'Booking.com', 'Trip.com', 'Airbnb', 'Hotels.com', 'Expedia'], 'æµ·å¤–äº¤é€š':['Uber', 'Grab', 'SUICA', 'ICOCA', 'PASMO', 'WOWPASS', 'AIRSIM'], 'æ—…è¡Œç¤¾':['é›„ç…æ—…éŠ', 'æ˜“éŠç¶²', 'æ±å—æ—…éŠ', 'å¯æ¨‚æ—…éŠ', 'é•·æ±å‡æœŸ', 'äº”ç¦æ—…éŠ', 'å–œé´»å‡æœŸ', 'æ˜“é£›æ—…éŠ', 'ç‡¦æ˜Ÿæ—…éŠ', 'åŠ åˆ©åˆ©æ—…è¡Œç¤¾', 'é³³å‡°åœ‹éš›æ—…è¡Œç¤¾', 'å±±å¯Œæ—…éŠ', 'è¡Œå¥æ—…éŠ'], 'èˆªç©ºå…¬å¸':['ä¸­è¯èˆªç©º', 'é•·æ¦®èˆªç©º', 'æ˜Ÿå®‡èˆªç©º', 'å°ç£è™èˆª', 'åœ‹æ³°èˆªç©º', 'è¯ä¿¡èˆªç©º', 'ç«‹æ¦®èˆªç©º', 'æ¨‚æ¡ƒèˆªç©º', 'é˜¿è¯é…‹èˆªç©º', 'äºæ´²èˆªç©º', 'é…·èˆª', 'æ·æ˜Ÿèˆªç©º', 'æ–°åŠ å¡èˆªç©º', 'æ—¥æœ¬èˆªç©º', 'è¶Šæ·èˆªç©º'] } },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: 'å¤©å¤©åˆ·', rate: 0.033, desc: 'è¶…å•†é‡è²© | äº¤é€š | åœè»Š', note: 'ä¸€èˆ¬0.3% + å¤©å¤©åˆ·3.5%', tag: 'daily', categories: { 'è¶…å•†é‡è²©(å°æ–°Pay)':['7-11', 'å…¨å®¶', 'å®¶æ¨‚ç¦', 'å¤§è²·å®¶', 'å”å‰è»»å¾·', 'LOPIA'], 'é€šå‹¤äº¤é€š':['å°ç£éµè·¯', 'å°ç£é«˜éµ', 'å°ç£å¤§è»ŠéšŠ', 'Yoxi', 'Uber'], 'åœè»Šç§Ÿè»Š':['å˜Ÿå˜Ÿæˆ¿', 'è»Šéº»å‰', 'åŸå¸‚è»Šæ—…', 'ViViPark', 'USPACE', 'UDRIVE', 'iRent', 'å’Œé‹ç§Ÿè»Š', 'æ ¼ä¸Šç§Ÿè»Š'], 'è—¥å¦è—¥å±€':['å¯¶é›…', 'åº·æ˜¯ç¾', 'å±ˆè‡£æ°', 'æä¸€é†«ç™‚', 'å¤§æ¨¹è—¥å±€', 'ä¸ä¸è—¥å±€', 'ä½‘å…¨ä¿å¥', 'å¥åº·äººç”Ÿ'] } },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: 'å¤§ç­†åˆ·', rate: 0.033, desc: 'ç™¾è²¨ | Outlet | å±…å®¶', note: 'ä¸€èˆ¬0.3% + å¤§ç­†åˆ·3.5%', tag: 'big', categories: { 'æŒ‡å®šç™¾è²¨':['æ–°å…‰ä¸‰è¶Š', 'é æ±ç™¾è²¨', 'é æ±SOGO', 'æ¼¢ç¥å·¨è›‹', 'æ¼¢ç¥ç™¾è²¨', 'å¾®é¢¨', 'å°åŒ—101', 'é æ±å·¨åŸ', 'å»£ä¸‰SOGO', 'å—ç´¡è³¼ç‰©ä¸­å¿ƒ', 'èª å“ç”Ÿæ´»', 'äº¬ç«™', 'ä¸‰å‰µç”Ÿæ´»', 'å¤¢æ™‚ä»£', 'çµ±ä¸€æ™‚ä»£', 'ä¸­å‹ç™¾è²¨', 'LaLaport'], 'æŒ‡å®šOutlet':['MITSUI OUTLET PARK', 'è¯æ³°åå“åŸ', 'SKM Park Outlets'], 'å±…å®¶è£ä¿®':['IKEA', 'ç‰¹åŠ›å±‹', 'HOLA', 'å®œå¾—åˆ©', 'ç‘ªé»‘å®¶å±…'], 'æ™‚å°šå“å‘³':['UNIQLO', 'GU', 'ZARA', 'NET', 'lululemon'] } },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: 'å¥½é¥—åˆ·', rate: 0.033, desc: 'é¤é£² | å¤–é€ | åŠ æ²¹', note: 'ä¸€èˆ¬0.3% + å¥½é¥—åˆ·3.5%', tag: 'fun', categories: { 'é¤é£²å¤–é€':['åœ‹å…§é¤é£²', 'ç‹å“ç˜‹Pay', 'Uber Eats', 'Foodpanda'], 'åŠ æ²¹å……é›»':['å°ç£ä¸­æ²¹-ç›´ç‡Ÿç«™', 'å°äºç›´ç‡Ÿ', 'å…¨åœ‹åŠ æ²¹', 'EVOASIS', 'EVALUE'], 'å±•æ¼”è³¼ç¥¨':['æ‹“å…ƒå”®ç¥¨', 'KKTIX', 'å¹´ä»£å”®ç¥¨', 'å¯¬å®å”®ç¥¨', 'OPENTIX', 'FunNow'], 'æŒ‡å®šKTV':['éŒ¢æ«ƒ', 'å¥½æ¨‚è¿ª', 'ONCOR', 'sing!go', 'äº«æº«é¦¨'], 'æŒ‡å®šæ¨‚åœ’':['ç¾©å¤§éŠæ¨‚ä¸–ç•Œ', 'éº—å¯¶æ¨‚åœ’', 'å…­ç¦æ‘', 'ä¹æ—æ–‡åŒ–æ‘', 'åŠæ¹–å±±', 'X-Park', 'åœ‹ç«‹æµ·æ´‹ç”Ÿç‰©åšç‰©é¤¨', 'é é›„æµ·æ´‹å…¬åœ’', 'å°äººåœ‹'], 'æŒ‡å®šé£¯åº—':['æ™¶è¯', 'é›²æœ—', 'è¬è±ª', 'ç…™æ³¢', 'è€çˆº', 'ç¦è¯', 'æ¼¢ä¾†', 'å›æ‚…', 'æ´²éš›', 'å¯’æ²'] } },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: 'LINE Pay', rate: 0.023, desc: 'LINE Pay ç¶å®šæ”¯ä»˜', note: 'ä¸€èˆ¬0.3% + LINE Pay 2%', tag: 'line', categories: { 'è¡Œå‹•æ”¯ä»˜':['LINE Pay'] } }
Â  Â  Â  Â  Â  Â  Â  Â  ]
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  id: 'cube', name: 'åœ‹æ³° CUBE', note: 'éœ€æ¯æ—¥ App åˆ‡æ›æ–¹æ¡ˆ (ä¸€èˆ¬æ¶ˆè²»/æ¬Šç›Šç„¡ä¸Šé™)',
Â  Â  Â  Â  Â  Â  Â  Â  benefits: [
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: 'ä¸€èˆ¬æ¶ˆè²»', rate: 0.003, desc: 'ä¸€èˆ¬æ¶ˆè²» (ç„¡ä¸Šé™)', type: 'text', note: '0.3%', categories: {} },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: 'ç˜‹å¤§æ¸¯', rate: 0.035, desc: 'é«˜é›„ä½å®¿ | Klook | é«˜éµå°éµ', note: '3.5%', tag: 'crazy', categories: { 'æŒ‡å®šé«˜é›„ä½å®¿':['åŸå¸‚å•†æ—…', 'å’Œé€¸é£¯åº—', 'æ—…å±…æ–‡æ—…', 'ç§èŠ¯æ—…åº—', 'å¤å„ªæ—…å±…', 'è¯åœ’å¤§é£¯åº—', 'æ·çµ²æ—…', 'éº—å°Šé…’åº—', 'å¸•å¯éº—é…’åº—', 'éˆæ€¡å¤§é£¯åº—'], 'æ—…éŠå¹³å°':['Klook'], 'æŒ‡å®šäº¤é€š':['å°ç£é«˜éµ', 'å°ç£éµè·¯å±€'] } },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: 'ç©æ•¸ä½', rate: 0.03, desc: 'ç¶²è³¼ | å½±éŸ³ | AI', note: '3%', tag: 'digital', categories: { 'AIå·¥å…·':['ChatGPT', 'Canva', 'Claude', 'Cursor', 'Duolingo', 'Gamma', 'Gemini', 'Notion', 'Perplexity', 'Speak'], 'åœ‹éš›é›»å•†':['æ·˜å¯¶', 'å¤©è²“', 'Coupang é…·æ¾'], 'ç¶²è³¼å¹³å°':['è¦çš®è³¼ç‰©', 'momoè³¼ç‰©ç¶²', 'PChome 24hè³¼ç‰©', 'å°æ¨¹è³¼'], 'æ•¸ä½ä¸²æµ':['Apple åª’é«”æœå‹™', 'Google Play', 'Disney+', 'Netflix', 'Spotify', 'YouTube Premium', 'Max'] } },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: 'æ¨‚éŸ¿è³¼', rate: 0.03, desc: 'ç™¾è²¨ | é¤é£² | å¤–é€ | è—¥å¦', note: '3%', tag: 'fun', categories: { 'åœ‹å…§ç™¾è²¨':['é æ±SOGO', 'é æ±Garden City', 'æ–°å…‰ä¸‰è¶Š', 'é æ±ç™¾è²¨', 'å°åŒ—101', 'BELLAVITA', 'å¾®é¢¨å»£å ´', 'çµ±ä¸€æ™‚ä»£', 'èª å“ç”Ÿæ´»', 'ATT 4 FUN', 'äº¬ç«™', 'ç¾éº—è¯', 'NOKEå¿ æ³°æ¨‚ç”Ÿæ´»', 'å¤§è‘‰é«˜å³¶å±‹', 'Mitsui Shopping Park LaLaport', 'å®åŒ¯å»£å ´', 'å°èŒ‚', 'å¤§æ±Ÿ', 'Big City', 'ä¸­å‹', 'å»£ä¸‰SOGO', 'å—ç´¡', 'è€æ–¯å»£å ´', 'å¤¢æ™‚ä»£', 'æ¼¢ç¥ç™¾è²¨', 'æ¼¢ç¥å·¨è›‹', 'æ–°æœˆå»£å ´', 'CITYLINK', 'ç§€æ³°ç”Ÿæ´»', 'ç’°çƒè³¼ç‰©ä¸­å¿ƒ', 'å¤ªå¹³æ´‹ç™¾è²¨', 'è¯æ³°åå“åŸ', 'SKM Park', 'MITSUI OUTLET PARK'], 'åœ‹å…§é¤é£²':['åœ‹å…§é¤é£²', 'éº¥ç•¶å‹'], 'å¤–é€å¹³å°':['Uber Eats', 'foodpanda'], 'åœ‹å…§è—¥å¦':['å±ˆè‡£æ°', 'åº·æ˜¯ç¾'] } },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: 'è¶£æ—…è¡Œ', rate: 0.03, desc: 'æµ·å¤– | è¨‚æˆ¿ | èˆªç©º | äº¤é€š', note: '3%', tag: 'travel', categories: { 'æµ·å¤–æ¶ˆè²»':['æµ·å¤–å¯¦é«”æ¶ˆè²»'], 'æµ·å¤–äº¤é€š':['SUICA', 'PASMO', 'ICOCA', 'Uber', 'Grab'], 'æŒ‡å®šæ¨‚åœ’':['æ±äº¬è¿ªå£«å°¼', 'å“ˆåˆ©æ³¢ç‰¹å½±åŸ', 'å¤§é˜ªç’°çƒå½±åŸ'], 'æ—…éŠè¨‚æˆ¿':['Klook', 'KKday', 'Agoda', 'Airbnb', 'Booking.com', 'Trip.com'], 'åœ‹å…§æ—…è¡Œç¤¾':['é›„ç…', 'æ˜“éŠç¶²', 'å¯æ¨‚', 'æ±å—', 'äº”ç¦', 'ç‡¦æ˜Ÿ', 'å±±å¯Œ', 'é•·æ±å‡æœŸ', 'é³³å‡°', 'æ˜“é£›ç¶²', 'ç†æƒ³æ—…éŠ', 'æ°¸åˆ©', 'ä¸‰è³€'], 'åœ‹å…§äº¤é€š':['å°ç£é«˜éµ', 'å°ç£å¤§è»ŠéšŠ', 'yoxi', 'iRent', 'å’Œé‹ç§Ÿè»Š', 'æ ¼ä¸Šç§Ÿè»Š', 'Uber'], 'æŒ‡å®šèˆªç©º':['ä¸­è¯èˆªç©º', 'é•·æ¦®èˆªç©º', 'æ˜Ÿå®‡èˆªç©º', 'å°ç£è™èˆª', 'åœ‹æ³°èˆªç©º', 'æ¨‚æ¡ƒèˆªç©º', 'é˜¿è¯é…‹èˆªç©º', 'é…·èˆª', 'æ·æ˜Ÿèˆªç©º', 'æ—¥æœ¬èˆªç©º', 'äºæ´²èˆªç©º', 'è¯åˆèˆªç©º', 'æ–°åŠ å¡èˆªç©º', 'ANAå…¨æ—¥ç©º', 'è¶Šæ·èˆªç©º', 'å¤§éŸ“èˆªç©º', 'é”ç¾èˆªç©º', 'åœŸè€³å…¶èˆªç©º', 'æ³•åœ‹èˆªç©º', 'å¡é”èˆªç©º'], 'æŒ‡å®šä½å®¿':['åœ‹å…§é£¯åº—', 'æ˜Ÿé‡é›†åœ˜', 'å…¨çƒè¿ªå£«å°¼é£¯åº—', 'æ±æ©«INN'] } },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: 'é›†ç²¾é¸', rate: 0.02, desc: 'è¶…å•† | é‡è²© | åŠ æ²¹ | IKEA', note: '2%', tag: 'base', categories: { 'å……é›»åœè»Š':['U-POWER', 'EVOASIS', 'EVALUE', 'TAIL', 'iCharging', 'è»Šéº»å‰', 'uTagGo'], 'ç”Ÿæ´»å±…å®¶':['IKEA'], 'é‡è²©è¶…å¸‚':['å®¶æ¨‚ç¦', 'å…¨è¯ç¦åˆ©ä¸­å¿ƒ', 'LOPIAå°ç£'], 'æŒ‡å®šåŠ æ²¹':['å°ç£ä¸­æ²¹-ç›´ç‡Ÿç«™'], 'æŒ‡å®šè¶…å•†':['7-ELEVEN', 'å…¨å®¶ä¾¿åˆ©å•†åº—'] } }
Â  Â  Â  Â  Â  Â  Â  Â  ]
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  id: 'unicard', name: 'ç‰å±± Unicard', note: 'ç•¶æœˆæœˆåº•æœ€å¾Œä¸€å¤©åˆ‡æ–¹æ¡ˆ',
Â  Â  Â  Â  Â  Â  Â  Â  benefits: [
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: 'ä¸€èˆ¬æ¶ˆè²»', rate: 0.01, desc: 'ä¸€èˆ¬æ¶ˆè²» (ç„¡ä¸Šé™)', type: 'text', note: '1%', categories: {} },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  name: 'ç™¾å¤§ç‰¹åº—', rate: 0, tag: 'list', type: 'modal',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  desc: 'é»æ“ŠæŸ¥çœ‹å®Œæ•´åå–®',Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  categories: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'è¡Œå‹•æ”¯ä»˜': ['ç‰å±±Wallet', 'LINE Pay', 'å…¨æ”¯ä»˜', 'è¡—å£æ”¯ä»˜', 'æ‚ éŠä»˜', 'å…¨ç›ˆ+PAY', 'iPASS MONEY', 'icash Pay'],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'åŠ æ²¹äº¤é€š': ['å°ç£ä¸­æ²¹-ç›´ç‡Ÿç«™', '55688', 'å°ç£éµè·¯', 'å°ç£é«˜éµ', 'Uber', 'Yoxi'],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'åœ‹å…§ç™¾è²¨': ['æ–°å…‰ä¸‰è¶Š', 'é æ±ç™¾è²¨', 'æ¼¢ç¥ç™¾è²¨', 'å¾®é¢¨', 'å°åŒ—101', 'è¯æ³°åå“åŸ', 'ä¸‰äº•OUTLET', 'äº¬ç«™', 'ç¾éº—è¯', 'èª å“', 'ç§€æ³°', 'LaLaport', 'çµ±é ˜', 'çµ±ä¸€æ™‚ä»£', 'æ˜‡æ†æ˜Œ', 'é‡‡ç›Ÿ'],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'é¤é£²ç¾é£Ÿ': ['Uber Eats', 'foodpanda', 'EZTABLE', 'ç‹å“ç˜‹Pay', 'é¥—è³“', 'ç“¦åŸ', 'ä¹¾æ¯', 'æ¼¢ä¾†ç¾é£Ÿ', 'é¼ç‹', 'çˆ­é®®'],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'èˆªç©ºæ—…éŠ': ['ä¸­è¯èˆªç©º', 'é•·æ¦®èˆªç©º', 'æ—¥æœ¬èˆªç©º', 'å°ç£è™èˆª', 'æ¨‚æ¡ƒèˆªç©º', 'é…·èˆª', 'Trip.com', 'Booking.com', 'Hotels.com', 'AsiaYo', 'Expedia', 'KKday', 'Klook', 'é›„ç…', 'å¯æ¨‚', 'æ±å—', 'Agoda'],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'ç²¾é¸å•†å®¶': ['Appleç›´ç‡Ÿåº—', 'å°ç±³å°ç£', 'å…¨åœ‹é›»å­', 'ç‡¦å¤', 'è¿ªå¡å„‚'],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'ç”Ÿæ´»æ¡è²·': ['å®¶æ¨‚ç¦', 'å±ˆè‡£æ°', 'åº·æ˜¯ç¾', 'ç‰¹åŠ›å±‹', 'HOLA', 'hoi', 'UNIQLO', 'NET', 'å¤§æ¨¹è—¥å±€', 'ä¸ä¸è—¥å¦'],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'é›»å•†å¹³å°': ['momoè³¼ç‰©ç¶²', 'è¦çš®è³¼ç‰©', 'æ·˜å¯¶', 'Coupangé…·æ¾'],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'åœ‹å¤–å¯¦é«”': ['æ—¥æœ¬', 'éŸ“åœ‹', 'æ³°åœ‹', 'è¶Šå—', 'æ–°åŠ å¡', 'é¦¬ä¾†è¥¿äº', 'è²å¾‹è³“', 'ä¸­åœ‹', 'é¦™æ¸¯', 'æ¾³é–€', 'ç¾åœ‹', 'åŠ æ‹¿å¤§', 'è‹±åœ‹', 'æ³•åœ‹', 'å¾·åœ‹', 'ç¾©å¤§åˆ©', 'æ¾³æ´²'],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'ESGæ¶ˆè²»': ['ç‰¹æ–¯æ‹‰', 'Gogoro', 'YouBike']
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  note: 'å›é¥‹ä¾æ–¹æ¡ˆ'
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: 'UPé¸', rate: 0.045, desc: 'ç™¾å¤§ç‰¹åº— (éœ€149é»è¨‚é–±)', type: 'text', note: 'ä¸€èˆ¬1% + UPé¸3.5% (ä¸Šé™åˆ·$142,857)' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: 'ä»»æ„é¸', rate: 0.035, desc: 'ç™¾å¤§ç‰¹åº— (éœ€è¨­å®š8å®¶)', type: 'text', note: 'ä¸€èˆ¬1% + ä»»æ„é¸2.5% (ä¸Šé™åˆ·$400,000)' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: 'ç°¡å–®é¸', rate: 0.03, desc: 'ç™¾å¤§ç‰¹åº— (é è¨­æ–¹æ¡ˆ)', type: 'text', note: 'ä¸€èˆ¬1% + ç°¡å–®é¸2% (ä¸Šé™åˆ·$500,000)' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  name: 'æ–°æˆ¶å›é¥‹', rate: 0.03, tag: 'new', type: 'modal',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  desc: 'æŒ‡å®šé€šè·¯',Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  categories: { 'æŒ‡å®šé€šè·¯': ['LINE Pay', 'Uber Eats', 'å®¶æ¨‚ç¦', 'éŸ“åœ‹', 'å…¨ç›ˆ+PAY'] },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  note: '<span class="urgent-text">æŒ‡å®šé€šè·¯ + 3% (ä¸Šé™åˆ·$14,667) æœ€é«˜7.5%</span>'Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  ]
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  id: 'ubear', name: 'ç‰å±± UBear', note: 'å¨›æ¨‚10% / ç¶²è³¼3% (ç¶²è³¼ä¸Šé™åˆ· $7,500)',
Â  Â  Â  Â  Â  Â  Â  Â  benefits: [
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: 'ä¸€èˆ¬æ¶ˆè²»', rate: 0.01, desc: 'ä¸€èˆ¬æ¶ˆè²» (ç„¡ä¸Šé™)', type: 'text', note: '1%', categories: {} },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: 'å½±éŸ³å¨›æ¨‚', rate: 0.10, tag: 'ent', desc: 'Netflix | Disney+ | Nintendo', categories: { 'å½±éŸ³å¨›æ¨‚': ['Netflix', 'Disney+', 'Nintendo', 'PlayStation', 'KKBOX', 'iTunes', 'Google Play', 'Funnow'] }, note: '10% (ä¸Šé™åˆ·$1000)' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: 'ç¶²è³¼/Pay', rate: 0.03, tag: 'net', desc: 'ç¶²è³¼ | è¡Œå‹•æ”¯ä»˜ | è¨‚æˆ¿ | å¤–é€',Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  categories: {Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'è¡Œå‹•æ”¯ä»˜': ['LINE Pay', 'è¡—å£æ”¯ä»˜', 'æ‚ éŠä»˜', 'OPENéŒ¢åŒ…', 'icash Pay', 'å…¨ç›ˆ+PAY', 'å…¨æ”¯ä»˜', 'æ©˜å­æ”¯ä»˜', 'skm pay', 'ä¸­æ²¹Pay', 'ç‰å±±Wallet', 'Pi æ‹éŒ¢åŒ…', 'æ­ä»˜å¯¶', 'PayPal', 'Hami Pay'],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'ç·šä¸Šè³¼ç‰©': ['PChome', 'momoè³¼ç‰©ç¶²', 'è¦çš®è³¼ç‰©', 'Coupangé…·æ¾', 'Yahoo', 'æ·˜å¯¶', 'éœ²å¤©', 'åšå®¢ä¾†', 'ç”Ÿæ´»å¸‚é›†', 'æ¾æœè³¼ç‰©', 'èª å“ç¶²è·¯', 'friDayè³¼ç‰©', 'udnå”®ç¥¨ç¶²', 'GOMAJI', 'æ¨‚å¤©å¸‚å ´', 'å±ˆè‡£æ°ç·šä¸Š', 'åº·æ˜¯ç¾ç·šä¸Š', 'å®¶æ¨‚ç¦ç·šä¸Š', 'ç¥è…¦', 'ç‡¦å¤ç·šä¸Š', 'Appleå®˜ç¶²', 'å°ç±³å°ç£', 'è¿ªå¡å„‚ç·šä¸Š', 'æ‹“å…ƒ', 'ZARA', 'H&M', 'GU', 'UNIQLO', 'Lativ', 'ZALORA', 'Pinkoi'],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'äº¤é€šè¨‚æˆ¿': ['55688', 'Uber', 'å°ç£é«˜éµT-EX', 'å°ç£éµè·¯ç·šä¸Š', 'æ˜“éŠç¶²', 'Agoda', 'Hotels.com', 'Expedia', 'Klook', 'KKday', 'Booking.com', 'Airbnb', 'ä¸­è¯èˆªç©º', 'é•·æ¦®èˆªç©º', 'å°ç£è™èˆª'],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'å¤–é€å¹³å°': ['Uber Eats', 'foodpanda', 'foodomo', 'lalamove', 'ä½ è¨‚']
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  note: 'ä¸€èˆ¬1% + ç¶²è³¼2% (ä¸Šé™åˆ·$7500)'Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: 'æ–°æˆ¶åŠ ç¢¼', rate: 0.07, tag: 'bonus', type: 'text', desc: 'åŒç¶²è³¼/Payé€šè·¯', note: 'ç¶²è³¼/PayåŠ ç¢¼ + 7% (ä¸Šé™åˆ·$2142) æœ€é«˜10%', categories: {} }
Â  Â  Â  Â  Â  Â  Â  Â  ]
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  id: 'dawho', name: 'æ°¸è± DAWHO', note: 'å¤§æˆ¶ç­‰ç´šï¼šåœ‹å…§3.5%/åœ‹å¤–4.5% (ä¸Šé™åˆ· 1.6 è¬)',
Â  Â  Â  Â  Â  Â  Â  Â  benefits: [
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: 'ä¸€èˆ¬æ¶ˆè²»', rate: 0.01, desc: 'ä¸€èˆ¬æ¶ˆè²» (ç„¡ä¸Šé™)', type: 'text', note: 'åœ‹å…§1%/åœ‹å¤–2%', categories: {} },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: 'åœ‹å…§å…¨é€šè·¯', rate: 0.035, desc: 'å…¨é€šè·¯ç„¡è…¦åˆ·', tag: 'all', type: 'text', note: 'ä¸€èˆ¬1% + ä»»å‹™2.5% (ä¸Šé™åˆ·$16,000)' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: 'åœ‹å¤–å…¨é€šè·¯', rate: 0.045, desc: 'åœ‹å¤–æ¶ˆè²»)', tag: 'foreign', type: 'text', note: 'ä¸€èˆ¬2% + ä»»å‹™2.5% (ä¸Šé™åˆ·$16,000)' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: 'æ‚ éŠå¡è‡ªå‹•åŠ å€¼', rate: 0.03, desc: 'ä¸å«ä¸€èˆ¬æ¶ˆè²»å›é¥‹', tag: 'easy', type: 'text', note: '3% (ä¸Šé™åˆ·$3333)' }
Â  Â  Â  Â  Â  Â  Â  Â  ]
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  ];

Â  Â  Â  Â  const normalizationMap = {
Â  Â  Â  Â  Â  Â  'å…¨å®¶': 'å…¨å®¶ä¾¿åˆ©å•†åº—', '7-11': '7-ELEVEN', 'å°ä¸ƒ': '7-ELEVEN',
Â  Â  Â  Â  Â  Â  'è¦çš®': 'è¦çš®è³¼ç‰©', 'uber': 'Uber', 'é«˜éµ': 'å°ç£é«˜éµ', 'å°éµ': 'å°ç£éµè·¯',
Â  Â  Â  Â  Â  Â  'ä¸­æ²¹': 'å°ç£ä¸­æ²¹-ç›´ç‡Ÿç«™', 'line': 'LINE Pay', 'linepay': 'LINE Pay',
Â  Â  Â  Â  Â  Â  'ubereats': 'Uber Eats', 'foodpanda': 'foodpanda', 'ç†Šè²“': 'foodpanda',
Â  Â  Â  Â  Â  Â  'å…¨è¯': 'å…¨è¯ç¦åˆ©ä¸­å¿ƒ', 'å®¶æ¨‚ç¦': 'å®¶æ¨‚ç¦', 'momo': 'momoè³¼ç‰©ç¶²',
Â  Â  Â  Â  Â  Â  'pchome': 'PChome 24hè³¼ç‰©', 'klook': 'Klook', 'kkday': 'KKday',
Â  Â  Â  Â  Â  Â  'uniqlo': 'UNIQLO', 'ikea': 'IKEA'
Â  Â  Â  Â  };
Â  Â  Â  Â  const aliasMap = { ...normalizationMap, 'è‚¯å¾·åŸº': 'åœ‹å…§é¤é£²', 'æ˜Ÿå·´å…‹': 'åœ‹å…§é¤é£²', 'éº¥ç•¶å‹': 'éº¥ç•¶å‹', 'æ—¥æœ¬': 'åœ‹å¤–æ¶ˆè²»', 'éŸ“åœ‹': 'åœ‹å¤–æ¶ˆè²»' };

Â  Â  Â  Â  const quickFilters = [
Â  Â  Â  Â  Â  Â  { name: 'ğŸª è¶…å•†é‡è²©', keywords: ['è¶…å•†', 'é‡è²©', 'è¶…å¸‚'] },
Â  Â  Â  Â  Â  Â  { name: 'ğŸ” é¤é£²å¤–é€', keywords: ['é¤é£²', 'å¤–é€', 'ç¾é£Ÿ'] },
Â  Â  Â  Â  Â  Â  { name: 'ğŸ›ï¸ ç¶²è³¼å¹³å°', keywords: ['ç¶²è³¼', 'é›»å•†', 'ç·šä¸Šè³¼ç‰©'] },
Â  Â  Â  Â  Â  Â  { name: 'ğŸš„ äº¤é€šæ—…éŠ', keywords: ['äº¤é€š', 'æ—…éŠ', 'è¨‚æˆ¿', 'èˆªç©º', 'æ—…è¡Œç¤¾', 'é«˜éµ', 'å°éµ', 'åœ‹å¤–'] },
Â  Â  Â  Â  Â  Â  { name: 'ğŸ’³ è¡Œå‹•æ”¯ä»˜', keywords: ['è¡Œå‹•æ”¯ä»˜', 'Pay'] },
Â  Â  Â  Â  Â  Â  { name: 'ğŸ¬ å½±éŸ³å¨›æ¨‚', keywords: ['å½±éŸ³', 'å¨›æ¨‚', 'éŠæˆ²', 'KTV', 'æ¨‚åœ’'] },
Â  Â  Â  Â  Â  Â  { name: 'ğŸ¬ ç™¾è²¨è—¥å¦', keywords: ['ç™¾è²¨', 'Outlet', 'è—¥å¦', 'è—¥å±€'] }
Â  Â  Â  Â  ];

Â  Â  Â  Â  let globalMerchantDB = {};
Â  Â  Â  Â  let activeFilter = null;

Â  Â  Â  Â  function init() {
Â  Â  Â  Â  Â  Â  generateMerchantDB();
Â  Â  Â  Â  Â  Â  renderCardOverview();
Â  Â  Â  Â  Â  Â  renderQuickFilters();
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // æœå°‹æ¬„ä½åŠ å…¥é˜²æŠ–å‹•è™•ç†
Â  Â  Â  Â  Â  Â  const debouncedSearch = debounce(handleSearchInput, 300);
Â  Â  Â  Â  Â  Â  document.getElementById('searchMerchant').addEventListener('input', (e) => {
Â  Â  Â  Â  Â  Â  Â  Â  // æ¸…é™¤æŒ‰éˆ•éœ€å³æ™‚é¡¯ç¤ºï¼Œä¸å»¶é²
Â  Â  Â  Â  Â  Â  Â  Â  const val = e.target.value.trim();
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('clearSearchBtn').style.display = val ? 'flex' : 'none';
Â  Â  Â  Â  Â  Â  Â  Â  debouncedSearch(e);
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  document.getElementById('calcMerchant').addEventListener('input', handleCalcSearchInput);
Â  Â  Â  Â  Â  Â  document.addEventListener('click', (e) => {
Â  Â  Â  Â  Â  Â  Â  Â  if (!e.target.closest('.input-wrapper')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('suggestionDropdown').style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('calcSuggestionDropdown').style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  document.getElementById('calcAmount').addEventListener('keyup', (e) => { if(e.key === 'Enter') calculateRewards(); });
Â  Â  Â  Â  Â  Â  document.getElementById('calcMerchant').addEventListener('keyup', (e) => { if(e.key === 'Enter') calculateRewards(); });
Â  Â  Â  Â  Â  Â  document.getElementById('calcUnicardScheme').addEventListener('change', calculateRewards);
Â  Â  Â  Â  Â  Â  document.getElementById('calcNewUser').addEventListener('change', calculateRewards);
Â  Â  Â  Â  }

Â  Â  Â  Â  function toggleSearchNewUser() {
Â  Â  Â  Â  Â  Â  const btn = document.getElementById('searchNewUserBtn');
Â  Â  Â  Â  Â  Â  const chk = document.getElementById('searchNewUser');
Â  Â  Â  Â  Â  Â  chk.checked = !chk.checked;
Â  Â  Â  Â  Â  Â  btn.classList.toggle('active', chk.checked);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (activeFilter) {
Â  Â  Â  Â  Â  Â  Â  Â  const currentFilter = activeFilter;
Â  Â  Â  Â  Â  Â  Â  Â  activeFilter = null;
Â  Â  Â  Â  Â  Â  Â  Â  applyCategoryFilter(currentFilter);
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  debouncedReSearch();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function toggleCalcNewUser() {
Â  Â  Â  Â  Â  Â  const btn = document.getElementById('calcNewUserBtn');
Â  Â  Â  Â  Â  Â  const chk = document.getElementById('calcNewUser');
Â  Â  Â  Â  Â  Â  chk.checked = !chk.checked;
Â  Â  Â  Â  Â  Â  btn.classList.toggle('active', chk.checked);
Â  Â  Â  Â  Â  Â  calculateRewards();
Â  Â  Â  Â  }

Â  Â  Â  Â  const debouncedReSearch = debounce(() => {
Â  Â  Â  Â  Â  Â  Â const val = document.getElementById('searchMerchant').value;
Â  Â  Â  Â  Â  Â  Â if (val) renderMerchantResult(val);
Â  Â  Â  Â  }, 300);

Â  Â  Â  Â  function generateMerchantDB() {
Â  Â  Â  Â  Â  Â  globalMerchantDB = {};
Â  Â  Â  Â  Â  Â  cardBenefitsData.forEach(card => {
Â  Â  Â  Â  Â  Â  Â  Â  card.benefits.forEach(benefit => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (benefit.categories) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Object.entries(benefit.categories).forEach(([catName, list]) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  list.forEach(rawMerchant => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const merchant = normalizationMap[rawMerchant] || rawMerchant;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const key = merchant.toLowerCase();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!globalMerchantDB[key]) globalMerchantDB[key] = { name: merchant, category: catName, cards: [] };
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let rate = benefit.rate;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let note = benefit.note;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let scheme = benefit.name;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (card.id === 'ubear' && benefit.tag === 'net') note = '3% (æ–°æˆ¶10%)';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (card.id === 'unicard' && benefit.name === 'ç™¾å¤§ç‰¹åº—åå–®') note = 'UPé¸4.5%';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!globalMerchantDB[key].cards.some(c => c.cardName === card.name && c.scheme === scheme)) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  globalMerchantDB[key].cards.push({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cardId: card.id, cardName: card.name, rate: rate, scheme: scheme, note: note, tag: benefit.tag
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  function renderQuickFilters() {
Â  Â  Â  Â  Â  Â  document.getElementById('quickCategoryTags').innerHTML = quickFilters.map(f =>Â 
Â  Â  Â  Â  Â  Â  Â  Â  `<div class="category-tag" onclick="applyCategoryFilter('${f.name}')">${f.name}</div>`
Â  Â  Â  Â  Â  Â  ).join('');
Â  Â  Â  Â  }
Â  Â  Â  Â  function applyCategoryFilter(filterName) {
Â  Â  Â  Â  Â  Â  const tags = document.querySelectorAll('.category-tag');
Â  Â  Â  Â  Â  Â  if (activeFilter === filterName) {
Â  Â  Â  Â  Â  Â  Â  Â  activeFilter = null; tags.forEach(t => t.classList.remove('active'));
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('merchantContainer').innerHTML = ''; return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  activeFilter = filterName; tags.forEach(t => {
Â  Â  Â  Â  Â  Â  Â  Â  t.classList.toggle('active', t.textContent === filterName);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  const filter = quickFilters.find(f => f.name === filterName);
Â  Â  Â  Â  Â  Â  const matched = Object.values(globalMerchantDB).filter(d => filter.keywords.some(kw => d.category.includes(kw)));
Â  Â  Â  Â  Â  Â  document.getElementById('merchantContainer').innerHTML = matched.length ? matched.map(d => generateMerchantCardHTML(d.name)).join('') : '<div style="text-align:center; padding:20px; color:#999;">ç„¡è³‡æ–™</div>';
Â  Â  Â  Â  }
Â  Â  Â  Â  function handleSearchInput(e) {
Â  Â  Â  Â  Â  Â  const val = e.target.value.trim().toLowerCase();
Â  Â  Â  Â  Â  Â  const dropdown = document.getElementById('suggestionDropdown');
Â  Â  Â  Â  Â  Â  if (!val) { dropdown.style.display = 'none'; return; }
Â  Â  Â  Â  Â  Â  let matches = new Set();
Â  Â  Â  Â  Â  Â  for (const [alias, real] of Object.entries(aliasMap)) if (alias.includes(val)) matches.add(real);
Â  Â  Â  Â  Â  Â  Object.keys(globalMerchantDB).forEach(k => { if(k.includes(val)) matches.add(globalMerchantDB[k].name); });
Â  Â  Â  Â  Â  Â  const results = Array.from(matches).slice(0, 10);
Â  Â  Â  Â  Â  Â  dropdown.innerHTML = results.length ? results.map(n => `<div class="suggestion-item" onclick="selectMerchant('${n}')">${n}</div>`).join('') : '<div class="suggestion-item" style="color:#999;">ç„¡ç›¸é—œè³‡æ–™</div>';
Â  Â  Â  Â  Â  Â  dropdown.style.display = 'block';
Â  Â  Â  Â  }
Â  Â  Â  Â  function selectMerchant(name) {
Â  Â  Â  Â  Â  Â  document.getElementById('searchMerchant').value = name;
Â  Â  Â  Â  Â  Â  document.getElementById('suggestionDropdown').style.display = 'none';
Â  Â  Â  Â  Â  Â  renderMerchantResult(name);
Â  Â  Â  Â  }
Â  Â  Â  Â  function clearSearch(inputId, btnId, isSearch) {
Â  Â  Â  Â  Â  Â  document.getElementById(inputId).value = '';
Â  Â  Â  Â  Â  Â  document.getElementById(btnId).style.display = 'none';
Â  Â  Â  Â  Â  Â  if (isSearch) {
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('merchantContainer').innerHTML = '';
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('suggestionDropdown').style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  activeFilter = null; document.querySelectorAll('.category-tag').forEach(t => t.classList.remove('active'));
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â document.getElementById('calcSuggestionDropdown').style.display = 'none';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  function renderMerchantResult(name) {
Â  Â  Â  Â  Â  Â  document.getElementById('merchantContainer').innerHTML = generateMerchantCardHTML(name);
Â  Â  Â  Â  }
Â  Â  Â  Â  function generateMerchantCardHTML(name) {
Â  Â  Â  Â  Â  Â  const key = name.toLowerCase();
Â  Â  Â  Â  Â  Â  let data = globalMerchantDB[key];
Â  Â  Â  Â  Â  Â  if (!data) {
Â  Â  Â  Â  Â  Â  Â  Â  const fuzzy = Object.keys(globalMerchantDB).find(k => k.includes(key) || key.includes(k));
Â  Â  Â  Â  Â  Â  Â  Â  if (fuzzy) data = globalMerchantDB[fuzzy];
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  let cards = data ? JSON.parse(JSON.stringify(data.cards)) : [];
Â  Â  Â  Â  Â  Â  const isForeign = ['åœ‹å¤–','æ—¥æœ¬','éŸ“åœ‹','æµ·å¤–'].some(k => name.includes(k));
Â  Â  Â  Â  Â  Â  if (!cards.find(c => c.cardId === 'dawho')) {
Â  Â  Â  Â  Â  Â  Â  Â  if (isForeign) cards.push({ cardId: 'dawho', cardName: 'æ°¸è± DAWHO', rate: 0.045, scheme: 'åœ‹å¤–æ¶ˆè²»', note: '4.5% (åœ‹å¤–2%+ä»»å‹™2.5%)', tag: 'foreign' });
Â  Â  Â  Â  Â  Â  Â  Â  else cards.push({ cardId: 'dawho', cardName: 'æ°¸è± DAWHO', rate: 0.035, scheme: 'åœ‹å…§å…¨é€šè·¯', note: '3.5% (ä¸€èˆ¬1%+ä»»å‹™2.5%)', tag: 'all' });
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  const uniScheme = document.getElementById('searchUnicardScheme').value;
Â  Â  Â  Â  Â  Â  const isNew = document.getElementById('searchNewUser').checked;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  cards.forEach(c => {
Â  Â  Â  Â  Â  Â  Â  Â  if (c.cardId === 'unicard' && c.tag === 'list') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let rate = 0.035, bonus = 0.025, txt = 'ä»»æ„é¸';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (uniScheme === 'simple') { rate = 0.03; bonus = 0.02; txt = 'ç°¡å–®é¸'; }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (uniScheme === 'up') { rate = 0.045; bonus = 0.035; txt = 'UPé¸'; }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (isNew) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const newBonusList = ['line pay', 'uber eats', 'å®¶æ¨‚ç¦', 'éŸ“åœ‹', 'å…¨ç›ˆ'];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (newBonusList.some(kw => name.toLowerCase().includes(kw))) { rate += 0.03; txt += ' + æ–°æˆ¶'; }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  c.rate = rate; c.scheme = txt; c.note = `${(rate*100).toFixed(1)}% (ä¸€èˆ¬1% + ${txt.replace(' ','').replace('ç°¡å–®é¸','ç°¡å–®é¸2%').replace('ä»»æ„é¸','ä»»æ„é¸2.5%').replace('UPé¸','UPé¸3.5%')})`;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  if (c.cardId === 'ubear' && c.tag === 'net' && isNew) { c.rate = 0.10; c.scheme = 'ç¶²è³¼/Pay + æ–°æˆ¶'; c.note = '10% (ä¸€èˆ¬1% + ç¶²è³¼2% + æ–°æˆ¶7%)'; }
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  if (!data) {
Â  Â  Â  Â  Â  Â  Â  Â  cards.push({ cardId: 'unicard', cardName: 'ç‰å±± Unicard', rate: 0.01, scheme: 'ä¸€èˆ¬æ¶ˆè²»', note: '1%' });
Â  Â  Â  Â  Â  Â  Â  Â  cards.push({ cardId: 'ubear', cardName: 'ç‰å±± UBear', rate: 0.01, scheme: 'ä¸€èˆ¬æ¶ˆè²»', note: '1%' });
Â  Â  Â  Â  Â  Â  Â  Â  cards.push({ cardId: 'richart', cardName: 'å°æ–° Richart', rate: 0.003, scheme: 'ä¸€èˆ¬æ¶ˆè²»', note: '0.3%' });
Â  Â  Â  Â  Â  Â  Â  Â  cards.push({ cardId: 'cube', cardName: 'åœ‹æ³° CUBE', rate: 0.003, scheme: 'ä¸€èˆ¬æ¶ˆè²»', note: '0.3%' });
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  cards.sort((a, b) => b.rate - a.rate);
Â  Â  Â  Â  Â  Â  const best = cards[0];
Â  Â  Â  Â  Â  Â  const brandClass = brandColorMap[best.cardId]?.class || '';
Â  Â  Â  Â  Â  Â  const dotColor = brandColorMap[best.cardId]?.color || '#ccc';

Â  Â  Â  Â  Â  Â  return `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="merchant-list ${brandClass}" onclick='openRankingModal(${JSON.stringify(cards)}, "${data ? data.name : name}")'>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div><div class="merchant-name">${data ? data.name : name}</div>${data ? `<span class="merchant-type">${data.category}</span>` : '<span class="merchant-type">ä¸€èˆ¬æ¶ˆè²»æ’è¡Œ</span>'}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="merchant-best-info">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="best-rate">${(best.rate * 100).toFixed(1)}%</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="best-card-name"><span class="card-icon-shape" style="background:${dotColor}"></span>${best.cardName}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  }
Â  Â  Â  Â  function openRankingModal(cards, merchantName) {
Â  Â  Â  Â  Â  Â  const body = document.getElementById('detailBody');
Â  Â  Â  Â  Â  Â  document.getElementById('modalTitle').innerText = `${merchantName} å›é¥‹æ’å`;
Â  Â  Â  Â  Â  Â  const html = cards.map((c, idx) => {
Â  Â  Â  Â  Â  Â  Â  Â  const isBest = idx === 0;
Â  Â  Â  Â  Â  Â  Â  Â  let badgeClass = 'scheme-badge';
Â  Â  Â  Â  Â  Â  Â  Â  if (c.tag === 'crazy') badgeClass += ' crazy'; if (c.rate >= 0.07) badgeClass += ' new-user';
Â  Â  Â  Â  Â  Â  Â  Â  const warningHtml = (isBest && c.tag === 'pay' && c.cardId === 'richart') ? `<div class="plan-warning">é™å°æ–°Pay/å°ç£Pay</div>` : '';
Â  Â  Â  Â  Â  Â  Â  Â  const themeClass = brandColorMap[c.cardId]?.class || '';
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  return `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="detail-card-item ${isBest ? 'best-card' : ''} ${themeClass}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="detail-card-header"><span>${isBest ? 'ğŸ† ' : ''}${c.cardName}</span><span>${(c.rate * 100).toFixed(1)}%</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="detail-card-body">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="display:flex; justify-content:space-between; align-items:center;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="${badgeClass}">${c.scheme}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="font-size:0.9em; color:#666;">${c.note.replace(/<[^>]*>/g, '')}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${warningHtml}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  }).join('');
Â  Â  Â  Â  Â  Â  body.innerHTML = html;
Â  Â  Â  Â  Â  Â  document.getElementById('detailModal').classList.add('show');
Â  Â  Â  Â  }

Â  Â  Â  Â  function handleCalcSearchInput(e) {
Â  Â  Â  Â  Â  Â  const val = e.target.value.trim().toLowerCase();
Â  Â  Â  Â  Â  Â  const dropdown = document.getElementById('calcSuggestionDropdown');
Â  Â  Â  Â  Â  Â  document.getElementById('clearCalcBtn').style.display = val ? 'flex' : 'none';
Â  Â  Â  Â  Â  Â  if (!val) { dropdown.style.display = 'none'; return; }
Â  Â  Â  Â  Â  Â  let matches = new Set();
Â  Â  Â  Â  Â  Â  for (const [alias, real] of Object.entries(aliasMap)) if (alias.includes(val)) matches.add(real);
Â  Â  Â  Â  Â  Â  Object.keys(globalMerchantDB).forEach(k => { if(k.includes(val)) matches.add(globalMerchantDB[k].name); });
Â  Â  Â  Â  Â  Â  const results = Array.from(matches).slice(0, 5);
Â  Â  Â  Â  Â  Â  dropdown.innerHTML = results.map(n => `<div class="suggestion-item" onclick="selectCalcMerchant('${n}')">${n}</div>`).join('');
Â  Â  Â  Â  Â  Â  dropdown.style.display = 'block';
Â  Â  Â  Â  }
Â  Â  Â  Â  function selectCalcMerchant(name) {
Â  Â  Â  Â  Â  Â  document.getElementById('calcMerchant').value = name;
Â  Â  Â  Â  Â  Â  document.getElementById('calcSuggestionDropdown').style.display = 'none';
Â  Â  Â  Â  Â  Â  if (name) calculateRewards();
Â  Â  Â  Â  }

Â  Â  Â  Â  function calculateRewards() {
Â  Â  Â  Â  Â  Â  const amount = parseFloat(document.getElementById('calcAmount').value);
Â  Â  Â  Â  Â  Â  const merchantInput = document.getElementById('calcMerchant').value.trim();
Â  Â  Â  Â  Â  Â  const isNewUser = document.getElementById('calcNewUser').checked;
Â  Â  Â  Â  Â  Â  const unicardScheme = document.getElementById('calcUnicardScheme').value;
Â  Â  Â  Â  Â  Â  const container = document.getElementById('calcResults');

Â  Â  Â  Â  Â  Â  if (!amount || !merchantInput) { return; }

Â  Â  Â  Â  Â  Â  const key = merchantInput.toLowerCase();
Â  Â  Â  Â  Â  Â  let data = globalMerchantDB[key];
Â  Â  Â  Â  Â  Â  if (!data) {
Â  Â  Â  Â  Â  Â  Â  Â  const fuzzy = Object.keys(globalMerchantDB).find(k => k.includes(key) || key.includes(k));
Â  Â  Â  Â  Â  Â  Â  Â  if (fuzzy) data = globalMerchantDB[fuzzy];
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  let cards = data ? JSON.parse(JSON.stringify(data.cards)) : [];
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const isForeign = ['åœ‹å¤–','æ—¥æœ¬','éŸ“åœ‹','æµ·å¤–'].some(k => merchantInput.includes(k));
Â  Â  Â  Â  Â  Â  if (!cards.find(c => c.cardId === 'dawho')) {
Â  Â  Â  Â  Â  Â  Â  Â  if (isForeign) cards.push({ cardId: 'dawho', cardName: 'æ°¸è± DAWHO', scheme: 'åœ‹å¤–æ¶ˆè²»', tag: 'foreign' });
Â  Â  Â  Â  Â  Â  Â  Â  else cards.push({ cardId: 'dawho', cardName: 'æ°¸è± DAWHO', scheme: 'åœ‹å…§å…¨é€šè·¯', tag: 'all' });
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  if (!data) {
Â  Â  Â  Â  Â  Â  Â  Â  cards.push({ cardId: 'ubear', cardName: 'ç‰å±± UBear', scheme: 'ä¸€èˆ¬æ¶ˆè²»', tag: 'gen', rate: 0.01 });
Â  Â  Â  Â  Â  Â  Â  Â  cards.push({ cardId: 'unicard', cardName: 'ç‰å±± Unicard', scheme: 'ä¸€èˆ¬æ¶ˆè²»', tag: 'gen', rate: 0.01 });
Â  Â  Â  Â  Â  Â  Â  Â  cards.push({ cardId: 'richart', cardName: 'å°æ–° Richart', scheme: 'ä¸€èˆ¬æ¶ˆè²»', tag: 'gen', rate: 0.003 });
Â  Â  Â  Â  Â  Â  Â  Â  cards.push({ cardId: 'cube', cardName: 'åœ‹æ³° CUBE', scheme: 'ä¸€èˆ¬æ¶ˆè²»', tag: 'gen', rate: 0.003 });
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const results = cards.map(c => {
Â  Â  Â  Â  Â  Â  Â  Â  let reward = 0, detailText = '', upgradeTip = '';
Â  Â  Â  Â  Â  Â  Â  Â  if (c.cardId === 'richart') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (c.tag === 'gen') { reward = Math.floor(amount * 0.003); detailText = `${formatMoney(reward)} (ä¸€èˆ¬0.3%)`; }Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if (c.tag === 'pay') { let base = Math.floor(amount * 0.003); let bonus = Math.floor(amount * 0.035); reward = base + bonus; detailText = `${formatMoney(base)} (ä¸€èˆ¬0.3%) + ${formatMoney(bonus)} (åŠ ç¢¼3.5%)`; }Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if (c.tag === 'line') { let base = Math.floor(amount * 0.003); let bonus = Math.floor(amount * 0.02); reward = base + bonus; detailText = `${formatMoney(base)} (ä¸€èˆ¬0.3%) + ${formatMoney(bonus)} (åŠ ç¢¼2%)`; }Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else { let base = Math.floor(amount * 0.003); let bonus = Math.floor(amount * 0.03); reward = base + bonus; detailText = `${formatMoney(base)} (ä¸€èˆ¬0.3%) + ${formatMoney(bonus)} (åŠ ç¢¼3%)`; }
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  else if (c.cardId === 'cube') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  reward = Math.floor(amount * c.rate); detailText = `${formatMoney(reward)} (æ–¹æ¡ˆ${formatRate(c.rate*100)}%)`;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  else if (c.cardId === 'dawho') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const cap = 16000; let baseRate = (c.tag === 'foreign') ? 0.02 : 0.01; let bonusRate = 0.025;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (amount <= cap) { let base = Math.floor(amount * baseRate); let bonus = Math.floor(amount * bonusRate); reward = base + bonus; detailText = `${formatMoney(base)} (åŸºæœ¬${formatRate(baseRate*100)}%) + ${formatMoney(bonus)} (ä»»å‹™åŠ ç¢¼${formatRate(bonusRate*100)}%)`; }Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else { let base = Math.floor(amount * baseRate); let bonus = Math.floor(cap * bonusRate); reward = base + bonus; detailText = `${formatMoney(base)} (åŸºæœ¬${formatRate(baseRate*100)}%) + ${formatMoney(bonus)} (ä»»å‹™åŠ ç¢¼2.5%)`; }
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  else if (c.cardId === 'ubear' && c.tag === 'net') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const newUserCap = 2142, bonusCap = 7500; let base = Math.floor(amount * 0.01);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (isNewUser) { let bAmount = Math.min(amount, bonusCap); let bonus = Math.floor(bAmount * 0.02); let nAmount = Math.min(amount, newUserCap); let newBonus = Math.floor(nAmount * 0.07); reward = base + bonus + newBonus; detailText = `${formatMoney(base)} (åŸºæœ¬1%) + ${formatMoney(bonus)} (ç¶²è³¼2%) + ${formatMoney(newBonus)} (æ–°æˆ¶7%)`; }Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else { let bAmount = Math.min(amount, bonusCap); let bonus = Math.floor(bAmount * 0.02); reward = base + bonus; detailText = `${formatMoney(base)} (åŸºæœ¬1%) + ${formatMoney(bonus)} (ç¶²è³¼2%)`; }
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  else if (c.cardId === 'unicard' && c.tag === 'list') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let baseRate = 0.01, bonusRate = 0.025, schemeName = 'ä»»æ„é¸', cap = 40000;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (unicardScheme === 'simple') { bonusRate = 0.02; schemeName = 'ç°¡å–®é¸'; cap = 50000; }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (unicardScheme === 'up') { bonusRate = 0.035; schemeName = 'UPé¸'; cap = 142857; }Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let base = Math.floor(amount * baseRate);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let bonusAmount = Math.min(amount, cap);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let bonus = Math.floor(bonusAmount * bonusRate);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let newBonus = 0;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const newBonusList = ['line pay', 'uber eats', 'å®¶æ¨‚ç¦', 'éŸ“åœ‹', 'å…¨ç›ˆ'];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (isNewUser && newBonusList.some(kw => merchantInput.toLowerCase().includes(kw))) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let nAmount = Math.min(amount, 16666); newBonus = Math.floor(nAmount * 0.03); detailText = `${formatMoney(base)} (åŸºæœ¬1%) + ${formatMoney(bonus)} (${schemeName}${formatRate(bonusRate*100)}%) + ${formatMoney(newBonus)} (æ–°æˆ¶3%)`; c.scheme = schemeName + "+æ–°æˆ¶";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else { detailText = `${formatMoney(base)} (åŸºæœ¬1%) + ${formatMoney(bonus)} (${schemeName}${formatRate(bonusRate*100)}%)`; c.scheme = schemeName; }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  reward = base + bonus + newBonus;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (unicardScheme !== 'up' && amount > 15000) upgradeTip = '<div class="upgrade-tip">ğŸ’¡ æ¶ˆè²»æ»¿ 1.5 è¬ï¼Œå»ºè­°è¨‚é–±å‡ç´š [UPé¸] å›é¥‹æœ€é«˜ï¼</div>';
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  else { reward = Math.floor(amount * c.rate); detailText = `${formatMoney(reward)} (å…¨é¡${formatRate(c.rate*100)}%)`; }
Â  Â  Â  Â  Â  Â  Â  Â  return { ...c, reward: Math.floor(reward), detail: detailText, upgradeTip };
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  results.sort((a, b) => b.reward - a.reward);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  container.innerHTML = results.map((res, idx) => {
Â  Â  Â  Â  Â  Â  Â  Â  const isWinner = idx === 0;
Â  Â  Â  Â  Â  Â  Â  Â  const themeClass = brandColorMap[res.cardId]?.class || '';
Â  Â  Â  Â  Â  Â  Â  Â  const trophy = isWinner ? 'ğŸ† ' : '';
Â  Â  Â  Â  Â  Â  Â  Â  return `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="calc-result-item ${isWinner ? 'winner' : ''} ${themeClass}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calc-header">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="font-weight:700;">${idx+1}. ${res.cardName} (${res.scheme})</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="calc-money">${trophy}${formatMoney(res.reward)}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="font-size:0.9em; color:${isWinner?'var(--color-success)':'#555'};">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  å¹³å‡å›é¥‹ç‡ï¼š${formatRate((res.reward/amount)*100)}%
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="calc-detail">${res.detail}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${res.upgradeTip || ''}
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `}).join('');
Â  Â  Â  Â  }

Â  Â  Â  Â  function renderCardOverview() {
Â  Â  Â  Â  Â  Â  document.getElementById('cardOverviewContainer').innerHTML = cardBenefitsData.map((card, idx) => {
Â  Â  Â  Â  Â  Â  Â  Â  const color = brandColorMap[card.id]?.color || '#ccc';
Â  Â  Â  Â  Â  Â  Â  Â  const themeClass = brandColorMap[card.id]?.class || '';
Â  Â  Â  Â  Â  Â  Â  Â  return `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-accordion-item ${themeClass}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="accordion-header" onclick="toggleAccordion(this)">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-title-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="card-icon-shape" style="background:${color}"></span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="card-title-text">${card.name}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="chevron">â–¼</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="accordion-body">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="benefit-row no-action" style="background:#fffcec;"><div class="benefit-desc">${card.note}</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${renderBenefits(card, idx)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `}).join('');
Â  Â  Â  Â  }
Â  Â  Â  Â  function renderBenefits(card, cardIndex) {
Â  Â  Â  Â  Â  Â  return card.benefits.map((b, bIndex) => {
Â  Â  Â  Â  Â  Â  Â  Â  if (b.type === 'text') return `<div class="benefit-row no-action"><div class="benefit-header"><span class="benefit-name">${b.name}</span><span class="benefit-rate">${(b.rate > 0 ? (b.rate * 100).toFixed(1) + '%' : '')}</span></div><div class="benefit-desc">${b.desc}</div>${b.note ? `<div class="benefit-note">ğŸ’¡ ${b.note}</div>` : ''}</div>`;
Â  Â  Â  Â  Â  Â  Â  Â  return `<div class="benefit-row" onclick="openSchemeList(${cardIndex}, ${bIndex})"><div class="benefit-header"><span class="benefit-name">${b.name}</span><span class="benefit-rate">${(b.rate * 100).toFixed(1)}%</span></div><div class="benefit-desc">${b.desc}</div>${b.note ? `<div class="benefit-note">ğŸ’¡ ${b.note}</div>` : ''}</div>`;
Â  Â  Â  Â  Â  Â  }).join('');
Â  Â  Â  Â  }
Â  Â  Â  Â  function openSchemeList(cardIndex, benefitIndex) {
Â  Â  Â  Â  Â  Â  const benefit = cardBenefitsData[cardIndex].benefits[benefitIndex];
Â  Â  Â  Â  Â  Â  document.getElementById('modalTitle').innerText = `${cardBenefitsData[cardIndex].name} - ${benefit.name}`;
Â  Â  Â  Â  Â  Â  let htmlContent = `<div style="margin-bottom:15px; font-size:0.9em; color:#666;">${benefit.note}</div>`;
Â  Â  Â  Â  Â  Â  if (benefit.categories) {
Â  Â  Â  Â  Â  Â  Â  Â  Object.entries(benefit.categories).forEach(([categoryName, items]) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  htmlContent += `<div class="detail-category-group"><div class="detail-category-title">${categoryName}</div><div class="scheme-list-container">${items.map(item => `<span class="scheme-list-item">${item}</span>`).join('')}</div></div>`;
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  document.getElementById('detailBody').innerHTML = htmlContent;
Â  Â  Â  Â  Â  Â  document.getElementById('detailModal').classList.add('show');
Â  Â  Â  Â  }
Â  Â  Â  Â  function toggleAccordion(header) {
Â  Â  Â  Â  Â  Â  const body = header.nextElementSibling;
Â  Â  Â  Â  Â  Â  const isOpen = body.classList.contains('open');
Â  Â  Â  Â  Â  Â  if(!isOpen) { body.classList.add('open'); header.classList.add('active'); } else { body.classList.remove('open'); header.classList.remove('active'); }
Â  Â  Â  Â  }
Â  Â  Â  Â  function switchTab(tabId) {
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
Â  Â  Â  Â  Â  Â  document.querySelector(`.nav-item[onclick="switchTab('${tabId}')"]`).classList.add('active');
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
Â  Â  Â  Â  Â  Â  document.getElementById(`tab-${tabId}`).classList.add('active');
Â  Â  Â  Â  }
Â  Â  Â  Â  function closeDetailModal() { document.getElementById('detailModal').classList.remove('show'); }

Â  Â  Â  Â  window.addEventListener('DOMContentLoaded', init);
Â  Â  </script>
</body>
</html>
