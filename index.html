<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ä¿¡ç”¨å¡å›é¥‹æŸ¥è©¢åŠ©æ‰‹ 2026 (å®Œæ•´ç‰ˆ)</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        :root {
            --color-primary: #2180a0;
            --color-primary-hover: #1a6b84;
            --color-bg: #f5f5f5;
            --color-surface: #ffffff;
            --color-text: #333333;
            --color-text-light: #666666;
            --color-border: #e0e0e0;
            --color-success: #32b862;
            --color-danger: #e74c3c;
            --color-highlight: #e65100;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--color-bg);
            color: var(--color-text);
            padding: 20px;
            line-height: 1.6;
            padding-top: 10px;
        }
        .container { max-width: 800px; margin: 0 auto; }
        h1 { text-align: center; margin-bottom: 15px; color: var(--color-primary); font-size: 1.6em; }
        
        /* === é ‚éƒ¨å°è¦½åˆ— === */
        .nav-tabs {
            display: flex;
            background: var(--color-surface);
            padding: 5px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            margin-bottom: 20px;
            position: sticky;
            top: 0;
            z-index: 900;
        }
        .nav-item {
            flex: 1;
            text-align: center;
            padding: 12px;
            cursor: pointer;
            border-radius: 8px;
            font-weight: 600;
            color: var(--color-text-light);
            transition: all 0.3s;
        }
        .nav-item.active {
            background-color: var(--color-primary);
            color: white;
            box-shadow: 0 2px 4px rgba(33, 128, 160, 0.3);
        }
        
        /* é é¢åˆ‡æ›æ§åˆ¶ */
        .tab-content { display: none; animation: fadeIn 0.3s; }
        .tab-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* === æœå°‹é æ¨£å¼ === */
        .form-section {
            background: var(--color-surface);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }
        .info-text {
            background: #e3f2fd;
            padding: 12px;
            border-radius: 8px;
            color: #0d47a1;
            margin-bottom: 20px;
            font-size: 0.9em;
            line-height: 1.5;
            border-left: 4px solid #2196f3;
        }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 8px; font-weight: 600; color: var(--color-text); }
        .input-wrapper { position: relative; display: flex; align-items: center; }
        input[type="text"] {
            width: 100%;
            padding: 14px 40px 14px 16px;
            border: 1px solid var(--color-border);
            border-radius: 8px;
            font-size: 16px;
        }
        input[type="text"]:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(33, 128, 160, 0.1);
        }
        .clear-btn {
            position: absolute; right: 12px;
            background: #eee; border: none; border-radius: 50%;
            width: 24px; height: 24px; cursor: pointer; color: #666;
            display: none; align-items: center; justify-content: center;
        }
        .suggestion-dropdown {
            position: absolute; top: 100%; left: 0; right: 0;
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: 0 0 8px 8px;
            max-height: 250px; overflow-y: auto; z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            display: none;
        }
        .suggestion-item { padding: 12px 16px; cursor: pointer; border-bottom: 1px solid #f0f0f0; }
        .suggestion-item:hover { background-color: #f5f9ff; }
        .highlight { color: var(--color-primary); font-weight: 700; }
        .category-tags { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 15px; }
        .category-tag {
            padding: 6px 12px; background: var(--color-surface);
            border: 1px solid var(--color-border); border-radius: 20px;
            cursor: pointer; font-size: 0.85em; color: var(--color-text-light);
            transition: all 0.2s; user-select: none;
        }
        .category-tag.active { background: var(--color-primary); color: white; border-color: var(--color-primary); }
        .merchant-list {
            background: var(--color-surface); padding: 16px;
            border-radius: 12px; margin-bottom: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            transition: transform 0.2s; cursor: pointer;
        }
        .merchant-list:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .merchant-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .merchant-name { font-size: 1.1em; font-weight: 700; color: var(--color-text); }
        .merchant-type { font-size: 0.8em; color: #888; background: #eee; padding: 2px 6px; border-radius: 4px; }
        .card-badges-row { display: flex; flex-wrap: wrap; gap: 6px; }
        .card-badge {
            padding: 4px 8px; background: #f0f0f0; color: #555;
            border-radius: 6px; font-size: 0.85em; font-weight: 500;
        }
        .card-badge.best {
            background: var(--color-best-bg); color: var(--color-best-text); border: 1px solid #b7eb8f;
        }
        .best-tip {
            margin-top: 10px; padding-top: 8px; border-top: 1px solid #eee;
            font-size: 0.85em; color: var(--color-text-light); display: flex; align-items: center;
        }
        .plan-hint { color: var(--color-highlight); font-weight: 700; margin-left: 4px; font-size: 0.9em; }

        /* === æ¬Šç›Šç¸½è¦½é æ¨£å¼ (Accordion) === */
        .card-accordion-item {
            background: var(--color-surface);
            border-radius: 12px;
            margin-bottom: 12px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
            overflow: hidden;
            border: 1px solid var(--color-border);
        }
        .accordion-header {
            padding: 16px 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
            transition: background 0.2s;
        }
        .accordion-header:hover { background: #f9f9f9; }
        .card-title-row { display: flex; align-items: center; gap: 10px; }
        .card-icon { font-size: 1.2em; }
        .card-title-text { font-weight: 700; font-size: 1.1em; color: var(--color-text); }
        .chevron { transition: transform 0.3s; color: #999; }
        .accordion-header.active .chevron { transform: rotate(180deg); }
        
        .accordion-body {
            display: none;
            padding: 0;
            background: #fff;
            border-top: 1px solid #eee;
        }
        .accordion-body.open { display: block; animation: slideDown 0.3s ease-out; }
        @keyframes slideDown { from { opacity: 0; max-height: 0; } to { opacity: 1; max-height: 500px; } }
        
        .benefit-row {
            padding: 12px 20px;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            flex-direction: column;
        }
        .benefit-row:last-child { border-bottom: none; }
        .benefit-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px; }
        .benefit-name { font-weight: 600; font-size: 1em; color: #444; }
        .benefit-rate { font-weight: 700; color: var(--color-primary); font-size: 1.1em; }
        .benefit-rate.high { color: var(--color-danger); }
        .benefit-desc { font-size: 0.85em; color: #666; margin-top: 2px; }
        .benefit-note { font-size: 0.8em; color: #999; margin-top: 4px; display: flex; align-items: center; gap: 4px; }
        
        /* === è©³æƒ…å½ˆçª— === */
        .detail-modal {
            display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.6); z-index: 2000;
            align-items: center; justify-content: center; padding: 20px;
            backdrop-filter: blur(2px);
        }
        .detail-modal.show { display: flex; }
        .detail-content {
            background: var(--color-surface); border-radius: 16px;
            width: 100%; max-width: 500px; max-height: 85vh;
            display: flex; flex-direction: column;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        .detail-header {
            padding: 20px; border-bottom: 1px solid #eee;
            display: flex; justify-content: space-between; align-items: flex-start;
        }
        .detail-title h2 { font-size: 1.5em; color: var(--color-primary); margin: 0; }
        .detail-close {
            background: #f0f0f0; border: none; width: 32px; height: 32px;
            border-radius: 50%; font-size: 20px; cursor: pointer; color: #666;
        }
        .detail-body { padding: 20px; overflow-y: auto; }
        .detail-card-item {
            margin-bottom: 16px; border: 1px solid #eee; border-radius: 8px; overflow: hidden;
        }
        .detail-card-item.best-card { border: 2px solid var(--color-success); background-color: #f6ffed; }
        .detail-card-header {
            padding: 10px 15px; background: #f9f9f9; font-weight: 600;
            display: flex; justify-content: space-between; align-items: center;
        }
        .detail-card-item.best-card .detail-card-header { background: #d9f7be; color: #237804; }
        .detail-card-body { padding: 12px 15px; }
        .rate-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px; }
        .rate-val { font-weight: 700; font-size: 1.2em; }
        .detail-plan-info { font-size: 0.85em; color: #666; margin-top: 8px; padding-top: 8px; border-top: 1px dashed #ddd; }
        .plan-alert {
            color: #d35400; background: #fff7e6; padding: 4px 8px; border-radius: 4px;
            margin-top: 6px; display: inline-block; font-weight: 600; font-size: 0.9em;
        }
        
        @media (max-width: 480px) {
            body { padding: 15px; padding-top: 10px; }
            h1 { font-size: 1.5em; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ’³ ä¿¡ç”¨å¡å›é¥‹æŸ¥è©¢åŠ©æ‰‹ 2026</h1>

        <div class="nav-tabs">
            <div class="nav-item active" onclick="switchTab('search')">ğŸ” é€šè·¯æœå°‹</div>
            <div class="nav-item" onclick="switchTab('overview')">ğŸ“‹ æ¬Šç›Šç¸½è¦½</div>
        </div>

        <div id="tab-search" class="tab-content active">
            <div class="form-section">
                <div class="info-text">
                    ğŸ” <strong>2026å¹´æœ€æ–°æ¬Šç›Š</strong>ï¼šæ”¯æ´åœ‹æ³°CUBE(ç˜‹å¤§æ¸¯)ã€å°æ–°Richart(ä¸ƒå¤§åˆ†é¡)ã€ç‰å±±Unicardã€æ°¸è±DAWHOã€ç‰å±±UBearã€‚
                </div>
                
                <div class="form-group">
                    <label for="searchMerchant">æœå°‹é€šè·¯åç¨±</label>
                    <div class="input-wrapper">
                        <input type="text" id="searchMerchant" placeholder="ä¾‹å¦‚ï¼šKlookã€é«˜éµã€éº¥ç•¶å‹..." autocomplete="off">
                        <button id="clearSearch" class="clear-btn" onclick="clearSearch()">âœ•</button>
                        <div id="suggestionDropdown" class="suggestion-dropdown"></div>
                    </div>
                </div>
                
                <div style="margin-top: 10px;">
                    <label>å¿«é€Ÿåˆ†é¡</label>
                    <div class="category-tags" id="categoryTags"></div>
                </div>
            </div>

            <div id="merchantResults" class="results-section">
                <div id="merchantContainer"></div>
            </div>
        </div>

        <div id="tab-overview" class="tab-content">
            <div id="cardOverviewContainer"></div>
        </div>

    </div>

    <div id="detailModal" class="detail-modal" onclick="if(event.target === this) closeDetailModal()">
        <div class="detail-content">
            <div class="detail-header">
                <div class="detail-title">
                    <h2 id="modalTitle">é€šè·¯åç¨±</h2>
                    <div id="modalType" style="color:#888; font-size:0.9em; margin-top:4px;">åˆ†é¡</div>
                </div>
                <button class="detail-close" onclick="closeDetailModal()">âœ•</button>
            </div>
            <div id="detailBody" class="detail-body"></div>
        </div>
    </div>

    <script>
        // === å¡ç‰‡åŸºæœ¬è³‡æ–™ ===
        const cardData = {
            richart: { name: 'å°æ–° Richart', baseRate: 0.003 },
            cube: { name: 'åœ‹æ³° CUBE', baseRate: 0.003 },
            unicard: { 
                name: 'ç‰å±± Unicard', 
                plansDetails: ['ç°¡å–®é¸ï¼š2% + åŸºæœ¬1% = 3%', 'ä»»æ„é¸ï¼š2.5% + åŸºæœ¬1% = 3.5%', 'UPé¸ï¼š3.5% + åŸºæœ¬1% = 4.5%'], 
                maxRate: 0.045 
            },
            ubear: { name: 'ç‰å±± UBear', baseRate: 0.01 },
            dawho: { name: 'æ°¸è± DAWHO', fixedRate: 0.035 }
        };

        // === æ¬Šç›Šç¸½è¦½è³‡æ–™ (æ–°å¢åŠŸèƒ½) ===
        const cardBenefitsData = [
            {
                id: 'richart',
                name: 'å°æ–° Richart',
                icon: 'ğŸ¶',
                note: 'éœ€å®Œæˆ Richart ä»»å‹™ (å¦‚å­˜æ¬¾/æ¶ˆè²») å§‹äº«åŠ ç¢¼',
                benefits: [
                    { name: 'Payè‘—åˆ·', rate: 0.038, desc: 'å››å¤§è¶…å•† | æ–°å…‰ä¸‰è¶Š | IKEA | å°ç£å¤§è»ŠéšŠ', note: 'éœ€ç¶å®šå°æ–°Payæ”¯ä»˜' },
                    { name: 'æ•¸è¶£åˆ·', rate: 0.033, desc: 'ç¶²è³¼ (è¦çš®/momo/é…·æ¾) | éŠæˆ²å½±éŸ³ | ç·šä¸Šèª²ç¨‹ | AIæœå‹™', note: 'ä¸Šé™ 1000 å…ƒ' },
                    { name: 'ç©æ—…åˆ·', rate: 0.033, desc: 'æµ·å¤–æ¶ˆè²» | èˆªç©º | è¨‚æˆ¿ (Agoda/Booking) | æ—…è¡Œç¤¾', note: 'ä¸Šé™ 1000 å…ƒ' },
                    { name: 'å¤©å¤©åˆ·', rate: 0.033, desc: 'è¶…å•† | é‡è²© | äº¤é€š (é«˜éµ/å°éµ/Uber) | è—¥å±€', note: 'ä¸Šé™ 1000 å…ƒ' },
                    { name: 'å¤§ç­†åˆ·', rate: 0.033, desc: 'ç™¾è²¨ (SOGO/é ç™¾) | Outlet | å±…å®¶ (IKEA) | æœé£¾ (UNIQLO)', note: 'ä¸Šé™ 1000 å…ƒ' },
                    { name: 'å¥½é¥—åˆ·', rate: 0.033, desc: 'é¤é£² | å¤–é€ | é£¯åº— | å”®ç¥¨ | åŠ æ²¹ | KTV | æ¨‚åœ’', note: 'ä¸Šé™ 1000 å…ƒ' },
                    { name: 'LINE Pay', rate: 0.023, desc: 'ä¸€èˆ¬ LINE Pay ç¶å®šæ”¯ä»˜', note: 'ç„¡é–€æª»' },
                    { name: 'å‡æ—¥åˆ·', rate: 0.02, desc: 'åœ‹å…§ç¯€å‡æ—¥ä¸é™é€šè·¯', note: 'åŸºæœ¬å›é¥‹' }
                ]
            },
            {
                id: 'cube',
                name: 'åœ‹æ³° CUBE',
                icon: 'â¬œ',
                note: 'éœ€æ¯æ—¥é€é CUBE App åˆ‡æ›è‡³å°æ‡‰æ¬Šç›Šæ–¹æ¡ˆ',
                benefits: [
                    { name: 'ç˜‹å¤§æ¸¯', rate: 0.035, desc: 'é«˜é›„æŒ‡å®šä½å®¿ | Klook | é«˜éµ | å°éµ', note: 'æœŸé–“é™å®š' },
                    { name: 'ç©æ•¸ä½', rate: 0.03, desc: 'ç¶²è³¼ (è¦çš®/momo) | å½±éŸ³ä¸²æµ | AIå·¥å…· | åœ‹éš›é›»å•†', note: 'ç„¡ä¸Šé™' },
                    { name: 'æ¨‚éŸ¿è³¼', rate: 0.03, desc: 'ç™¾è²¨å…¬å¸ | å…¨çƒé¤é£² | å¤–é€ | è—¥å¦', note: 'ç„¡ä¸Šé™' },
                    { name: 'è¶£æ—…è¡Œ', rate: 0.03, desc: 'æµ·å¤–å¯¦é«” | è¨‚æˆ¿ | èˆªç©º | æ—…è¡Œç¤¾ | åœ‹å…§äº¤é€š', note: 'ç„¡ä¸Šé™' },
                    { name: 'é›†ç²¾é¸', rate: 0.02, desc: 'è¶…å•† | é‡è²© (å…¨è¯/å®¶æ¨‚ç¦) | åŠ æ²¹ | IKEA', note: 'ç„¡ä¸Šé™' }
                ]
            },
            {
                id: 'unicard',
                name: 'ç‰å±± Unicard',
                icon: 'ğŸ¦„',
                note: 'åŸºæœ¬ 1%ï¼Œç°¡å–®é¸/ä»»æ„é¸/UPé¸éœ€ç¬¦åˆå°æ‡‰ä»»å‹™',
                benefits: [
                    { name: 'UPé¸', rate: 0.045, desc: 'ç™¾å¤§ç‰¹åº— (è¡Œå‹•æ”¯ä»˜/äº¤é€š/ç™¾è²¨/é¤é£²/æ—…éŠ)', note: 'éœ€å®ŒæˆUPä»»å‹™ (3000é»æˆ–æ¶ˆè²»5è¬)' },
                    { name: 'ä»»æ„é¸', rate: 0.035, desc: 'ç™¾å¤§ç‰¹åº—', note: 'éœ€é€é App è¨­å®šæ–¹æ¡ˆ' },
                    { name: 'ç°¡å–®é¸', rate: 0.03, desc: 'ç™¾å¤§ç‰¹åº—', note: 'é è¨­æ–¹æ¡ˆ' },
                    { name: 'ä¸€èˆ¬æ¶ˆè²»', rate: 0.01, desc: 'éæŒ‡å®šé€šè·¯', note: 'ç„¡ä¸Šé™' }
                ]
            },
            {
                id: 'ubear',
                name: 'ç‰å±± UBear',
                icon: 'ğŸ»',
                note: 'æŒ‡å®šå¨›æ¨‚èˆ‡ç¶²è³¼å›é¥‹åˆä½µè¨ˆç®—ä¸Šé™',
                benefits: [
                    { name: 'å½±éŸ³å¨›æ¨‚', rate: 0.10, desc: 'Netflix | Disney+ | Nintendo | PlayStation', note: 'æ¯æœŸä¸Šé™ 100 å…ƒ' },
                    { name: 'ç¶²è³¼/Pay', rate: 0.03, desc: 'åœ‹å…§å¤–ç¶²è³¼ | è¡Œå‹•æ”¯ä»˜', note: 'æ¯æœŸä¸Šé™ 200 å…ƒ' },
                    { name: 'ä¸€èˆ¬æ¶ˆè²»', rate: 0.01, desc: 'éç¶²è³¼ä¹‹ä¸€èˆ¬æ¶ˆè²»', note: 'ç„¡ä¸Šé™' }
                ]
            },
            {
                id: 'dawho',
                name: 'æ°¸è± DAWHO',
                icon: 'ğŸ¦',
                note: 'éœ€é”æˆå¤§æˆ¶ç­‰ç´š (æœˆå‡å¾€ä¾† 10 è¬å…ƒ)',
                benefits: [
                    { name: 'åœ‹å…§æŒ‡å®š', rate: 0.035, desc: 'å…¨é€šè·¯ (ä¸€èˆ¬1% + ä»»å‹™1% + æŒ‡å®š5% ä¸Šé™300å…ƒ)', note: 'åœ‹å…§çµ±ä¸€ 3.5% (å«ä¸Šé™)' },
                    { name: 'åœ‹å¤–æ¶ˆè²»', rate: 0.035, desc: 'åœ‹å¤–å¯¦é«”æˆ–ç¶²è³¼', note: 'æœ€é«˜å¯é” 7% (è¦–æ´»å‹•)' }
                ]
            }
        ];

        // ... [ä¿ç•™åŸæœ¬çš„ merchantDatabase å’Œ categories è³‡æ–™ï¼Œç¢ºä¿æœå°‹åŠŸèƒ½æ­£å¸¸] ...
        // ç‚ºäº†ç¯€çœç¯‡å¹…ï¼Œé€™è£¡ä½¿ç”¨æ‚¨å‰ä¸€æ¬¡ç¢ºèªéçš„å®Œæ•´è³‡æ–™åº« (å«Richartä¸ƒå¤§æ¬Šç›Šã€CUBEç˜‹å¤§æ¸¯ç­‰)
        // åœ¨å¯¦éš›æª”æ¡ˆä¸­ï¼Œè«‹ä¿ç•™ä¸‹æ–¹å®Œæ•´çš„ merchantDatabase è®Šæ•¸
        const merchantDatabase = {
            // === 1. æ•¸è¶£åˆ· (Richart 3.3%) ===
            'è¦çš®è³¼ç‰©': { category: 'shopping', type: 'ç¶²è³¼', aliases:['è¦çš®'], cards: { unicard: true, cube: 0.03, richart: 0.033, ubear: 0.03, dawho: true } },
            'momoè³¼ç‰©ç¶²': { category: 'shopping', type: 'ç¶²è³¼', aliases:['momo'], cards: { unicard: true, cube: 0.03, richart: 0.033, ubear: 0.03, dawho: true } },
            'Coupang': { category: 'shopping', type: 'ç¶²è³¼', aliases:['é…·æ¾'], cards: { unicard: true, richart: 0.033, cube: 0.03, ubear: 0.03, dawho: true } },
            'PChome': { category: 'shopping', type: 'ç¶²è³¼', aliases:['PChome 24h'], cards: { cube: 0.03, richart: 0.033, ubear: 0.03, dawho: true } },
            'æ·˜å¯¶': { category: 'shopping', type: 'ç¶²è³¼', aliases:['Taobao','å¤©è²“'], cards: { unicard: true, cube: 0.03, richart: 0.033, ubear: 0.03, dawho: true } },
            'Amazon': { category: 'shopping', type: 'ç¶²è³¼', cards: { richart: 0.033, ubear: 0.03, dawho: true } },
            'æ±æ£®è³¼ç‰©': { category: 'shopping', type: 'ç¶²è³¼', cards: { richart: 0.033, ubear: 0.03, dawho: true } },
            'åšå®¢ä¾†': { category: 'shopping', type: 'ç¶²è³¼', cards: { richart: 0.033, ubear: 0.03, dawho: true } },
            'Richart Mart': { category: 'shopping', type: 'ç¶²è³¼', cards: { richart: 0.033 } },
            'PayEasy': { category: 'shopping', type: 'ç¶²è³¼', cards: { richart: 0.033 } },
            'iHerb': { category: 'shopping', type: 'ç¶²è³¼', cards: { richart: 0.033, ubear: 0.01, dawho: true } },
            'SHEIN': { category: 'shopping', type: 'ç¶²è³¼', cards: { richart: 0.033, ubear: 0.01, dawho: true } },
            'Farfetch': { category: 'shopping', type: 'ç¶²è³¼', cards: { richart: 0.033, ubear: 0.01, dawho: true } },
            'Olive Young': { category: 'shopping', type: 'ç¶²è³¼', cards: { richart: 0.033, ubear: 0.01, dawho: true } },
            // ç·šä¸Šèª²ç¨‹
            'çŸ¥è­˜è¡›æ˜Ÿ': { category: 'course', type: 'ç·šä¸Šèª²ç¨‹', cards: { richart: 0.033, dawho: true } },
            'Amazing Talker': { category: 'course', type: 'ç·šä¸Šèª²ç¨‹', cards: { richart: 0.033, dawho: true } },
            'Tutor ABC': { category: 'course', type: 'ç·šä¸Šèª²ç¨‹', cards: { richart: 0.033, dawho: true } },
            'Hahow': { category: 'course', type: 'ç·šä¸Šèª²ç¨‹', cards: { richart: 0.033, dawho: true } },
            'PressPlay': { category: 'course', type: 'ç·šä¸Šèª²ç¨‹', cards: { richart: 0.033, dawho: true } },
            // éŠæˆ²/å½±éŸ³
            'MyCard': { category: 'entertainment', type: 'éŠæˆ²', cards: { richart: 0.033, dawho: true } },
            'éŠæˆ²æ©˜å­': { category: 'entertainment', type: 'éŠæˆ²', aliases:['Gamania'], cards: { richart: 0.033, dawho: true } },
            'Steam': { category: 'entertainment', type: 'éŠæˆ²', cards: { richart: 0.033, ubear: 0.03, dawho: true } },
            'PlayStation': { category: 'entertainment', type: 'éŠæˆ²', cards: { ubear: 0.10, richart: 0.033, dawho: true } },
            'Nintendo': { category: 'entertainment', type: 'éŠæˆ²', aliases:['ä»»å¤©å ‚'], cards: { ubear: 0.10, richart: 0.033, dawho: true } },
            'Netflix': { category: 'entertainment', type: 'å½±éŸ³', cards: { ubear: 0.10, cube: 0.03, richart: 0.033, dawho: true } },
            'Disney+': { category: 'entertainment', type: 'å½±éŸ³', cards: { ubear: 0.10, cube: 0.03, richart: 0.033, dawho: true } },
            // AI
            'ChatGPT': { category: 'digital', type: 'AIå·¥å…·', cards: { cube: 0.03, richart: 0.033, ubear: 0.03, dawho: true } },
            'Notion': { category: 'digital', type: 'AIå·¥å…·', cards: { cube: 0.03, richart: 0.033, ubear: 0.03, dawho: true } },
            'Canva': { category: 'digital', type: 'AIå·¥å…·', cards: { cube: 0.03, richart: 0.033, ubear: 0.03, dawho: true } },
            'Perplexity': { category: 'digital', type: 'AIå·¥å…·', cards: { cube: 0.03, richart: 0.033, ubear: 0.03, dawho: true } },
            'Claude': { category: 'digital', type: 'AIå·¥å…·', cards: { cube: 0.03, richart: 0.033, ubear: 0.03, dawho: true } },

            // === 2. ç©æ—…åˆ· (Richart 3.3%) ===
            'Klook': { category: 'travel', type: 'æ—…éŠ', cards: { cube: 0.035, unicard: true, richart: 0.033, ubear: 0.03, dawho: true } },
            'KKday': { category: 'travel', type: 'æ—…éŠ', cards: { unicard: true, cube: 0.03, richart: 0.033, ubear: 0.03, dawho: true } },
            'Agoda': { category: 'travel', type: 'è¨‚æˆ¿', cards: { unicard: true, cube: 0.03, richart: 0.033, ubear: 0.03, dawho: true } },
            'Booking.com': { category: 'travel', type: 'è¨‚æˆ¿', cards: { unicard: true, cube: 0.03, richart: 0.033, ubear: 0.03, dawho: true } },
            'Trip.com': { category: 'travel', type: 'è¨‚æˆ¿', cards: { unicard: true, cube: 0.03, richart: 0.033, dawho: true } },
            'Airbnb': { category: 'travel', type: 'è¨‚æˆ¿', cards: { unicard: true, cube: 0.03, richart: 0.033, ubear: 0.03, dawho: true } },
            'Hotels.com': { category: 'travel', type: 'è¨‚æˆ¿', cards: { unicard: true, richart: 0.033, dawho: true } },
            'Expedia': { category: 'travel', type: 'è¨‚æˆ¿', cards: { unicard: true, richart: 0.033, dawho: true } },
            // æµ·å¤–äº¤é€š
            'Grab': { category: 'transport', type: 'æµ·å¤–äº¤é€š', cards: { cube: 0.03, richart: 0.033, dawho: true } },
            'SUICA': { category: 'transport', type: 'æµ·å¤–äº¤é€š', aliases:['è¥¿ç“œå¡'], cards: { cube: 0.03, richart: 0.033, dawho: true } },
            'ICOCA': { category: 'transport', type: 'æµ·å¤–äº¤é€š', cards: { cube: 0.03, richart: 0.033, dawho: true } },
            'PASMO': { category: 'transport', type: 'æµ·å¤–äº¤é€š', cards: { cube: 0.03, richart: 0.033, dawho: true } },
            'WOWPASS': { category: 'transport', type: 'æµ·å¤–äº¤é€š', cards: { richart: 0.033, dawho: true } },
            'AIRSIM': { category: 'transport', type: 'ç¶²å¡', cards: { richart: 0.033, dawho: true } },
            // æ—…è¡Œç¤¾
            'é›„ç…æ—…éŠ': { category: 'travel', type: 'æ—…è¡Œç¤¾', cards: { unicard: true, cube: 0.03, richart: 0.033, dawho: true } },
            'æ˜“éŠç¶²': { category: 'travel', type: 'æ—…è¡Œç¤¾', cards: { cube: 0.03, richart: 0.033, dawho: true } },
            'æ±å—æ—…éŠ': { category: 'travel', type: 'æ—…è¡Œç¤¾', cards: { unicard: true, cube: 0.03, richart: 0.033, dawho: true } },
            'å¯æ¨‚æ—…éŠ': { category: 'travel', type: 'æ—…è¡Œç¤¾', cards: { unicard: true, cube: 0.03, richart: 0.033, dawho: true } },
            'é•·æ±å‡æœŸ': { category: 'travel', type: 'æ—…è¡Œç¤¾', cards: { cube: 0.03, richart: 0.033, dawho: true } },
            'äº”ç¦æ—…éŠ': { category: 'travel', type: 'æ—…è¡Œç¤¾', cards: { cube: 0.03, richart: 0.033, dawho: true } },
            'å–œé´»å‡æœŸ': { category: 'travel', type: 'æ—…è¡Œç¤¾', cards: { richart: 0.033, dawho: true } },
            'æ˜“é£›ç¶²': { category: 'travel', type: 'æ—…è¡Œç¤¾', cards: { cube: 0.03, richart: 0.033, dawho: true } },
            'ç‡¦æ˜Ÿæ—…éŠ': { category: 'travel', type: 'æ—…è¡Œç¤¾', cards: { cube: 0.03, richart: 0.033, dawho: true } },
            'åŠ åˆ©åˆ©': { category: 'travel', type: 'æ—…è¡Œç¤¾', aliases:['åŠ åˆ©åˆ©æ—…è¡Œç¤¾'], cards: { richart: 0.033, dawho: true } },
            'é³³å‡°æ—…éŠ': { category: 'travel', type: 'æ—…è¡Œç¤¾', aliases:['é³³å‡°åœ‹éš›'], cards: { cube: 0.03, richart: 0.033, dawho: true } },
            'å±±å¯Œæ—…éŠ': { category: 'travel', type: 'æ—…è¡Œç¤¾', cards: { cube: 0.03, richart: 0.033, dawho: true } },
            'è¡Œå¥æ—…éŠ': { category: 'travel', type: 'æ—…è¡Œç¤¾', cards: { richart: 0.033, dawho: true } },
            // èˆªç©º
            'ä¸­è¯èˆªç©º': { category: 'airline', type: 'èˆªç©º', cards: { unicard: true, cube: 0.03, richart: 0.033, ubear: 0.03, dawho: true } },
            'é•·æ¦®èˆªç©º': { category: 'airline', type: 'èˆªç©º', cards: { unicard: true, cube: 0.03, richart: 0.033, ubear: 0.03, dawho: true } },
            'æ˜Ÿå®‡èˆªç©º': { category: 'airline', type: 'èˆªç©º', cards: { cube: 0.03, richart: 0.033, dawho: true } },
            'å°ç£è™èˆª': { category: 'airline', type: 'èˆªç©º', cards: { unicard: true, cube: 0.03, richart: 0.033, ubear: 0.03, dawho: true } },
            'åœ‹æ³°èˆªç©º': { category: 'airline', type: 'èˆªç©º', cards: { cube: 0.03, richart: 0.033, dawho: true } },
            'è¯ä¿¡èˆªç©º': { category: 'airline', type: 'èˆªç©º', cards: { richart: 0.033, dawho: true } },
            'ç«‹æ¦®èˆªç©º': { category: 'airline', type: 'èˆªç©º', cards: { richart: 0.033, dawho: true } },
            'æ¨‚æ¡ƒèˆªç©º': { category: 'airline', type: 'èˆªç©º', cards: { unicard: true, cube: 0.03, richart: 0.033, dawho: true } },
            'é˜¿è¯é…‹èˆªç©º': { category: 'airline', type: 'èˆªç©º', cards: { cube: 0.03, richart: 0.033, dawho: true } },
            'äºæ´²èˆªç©º': { category: 'airline', type: 'èˆªç©º', cards: { cube: 0.03, richart: 0.033, dawho: true } },
            'é…·èˆª': { category: 'airline', type: 'èˆªç©º', cards: { unicard: true, cube: 0.03, richart: 0.033, dawho: true } },
            'æ·æ˜Ÿèˆªç©º': { category: 'airline', type: 'èˆªç©º', cards: { cube: 0.03, richart: 0.033, dawho: true } },
            'æ–°åŠ å¡èˆªç©º': { category: 'airline', type: 'èˆªç©º', cards: { cube: 0.03, richart: 0.033, dawho: true } },
            'æ—¥æœ¬èˆªç©º': { category: 'airline', type: 'èˆªç©º', cards: { unicard: true, cube: 0.03, richart: 0.033, dawho: true } },
            'è¶Šæ·èˆªç©º': { category: 'airline', type: 'èˆªç©º', cards: { cube: 0.03, richart: 0.033, dawho: true } },
            'æµ·å¤–æ¶ˆè²»': { category: 'overseas', type: 'åœ‹å¤–', cards: { cube: 0.03, richart: 0.033, ubear: 0.01, dawho: true } },

            // === 3. å¤©å¤©åˆ· (Richart 3.3%) ===
            '7-11': { category: 'supermarket', type: 'è¶…å•†', aliases: ['7-ELEVEN'], cards: { cube: 0.02, richart: 0.038, dawho: true } },
            'å…¨å®¶': { category: 'supermarket', type: 'è¶…å•†', cards: { cube: 0.02, richart: 0.038, dawho: true } },
            'å®¶æ¨‚ç¦': { category: 'supermarket', type: 'é‡è²©', cards: { unicard: true, cube: 0.02, richart: 0.033, dawho: true } },
            'å¤§è²·å®¶': { category: 'supermarket', type: 'é‡è²©', cards: { richart: 0.033, dawho: true } },
            'å”å‰è»»å¾·': { category: 'supermarket', type: 'è¶…å¸‚', aliases:['Donki'], cards: { richart: 0.033, dawho: true } },
            'LOPIA': { category: 'supermarket', type: 'è¶…å¸‚', cards: { cube: 0.02, richart: 0.033, dawho: true } },
            // äº¤é€š
            'å°éµ': { category: 'transport', type: 'äº¤é€š', aliases:['å°ç£éµè·¯'], cards: { cube: 0.035, unicard: true, richart: 0.033, ubear: 0.03, dawho: true } },
            'é«˜éµ': { category: 'transport', type: 'äº¤é€š', aliases:['å°ç£é«˜éµ'], cards: { cube: 0.035, unicard: true, richart: 0.033, ubear: 0.03, dawho: true } },
            'å°ç£å¤§è»ŠéšŠ': { category: 'transport', type: 'äº¤é€š', aliases:['55688'], cards: { unicard: true, cube: 0.03, richart: 0.038, dawho: true } },
            'Yoxi': { category: 'transport', type: 'äº¤é€š', cards: { unicard: true, cube: 0.03, richart: 0.033, dawho: true } },
            'Uber': { category: 'transport', type: 'äº¤é€š', cards: { unicard: true, cube: 0.03, richart: 0.033, ubear: 0.03, dawho: true } },
            // åœè»Šç§Ÿè»Š
            'å˜Ÿå˜Ÿæˆ¿': { category: 'car', type: 'åœè»Š', cards: { richart: 0.033, dawho: true } },
            'è»Šéº»å‰': { category: 'car', type: 'åœè»Š/å……é›»', aliases:['Autopass'], cards: { cube: 0.02, richart: 0.033, dawho: true } },
            'åŸå¸‚è»Šæ—…': { category: 'car', type: 'åœè»Š', cards: { richart: 0.033, dawho: true } },
            'ViViPark': { category: 'car', type: 'åœè»Š', cards: { richart: 0.033, dawho: true } },
            'USPACE': { category: 'car', type: 'åœè»Š', cards: { richart: 0.033, dawho: true } },
            'UDRIVE': { category: 'car', type: 'ç§Ÿè»Š', cards: { richart: 0.033, dawho: true } },
            'iRent': { category: 'transport', type: 'ç§Ÿè»Š', cards: { cube: 0.03, richart: 0.033, dawho: true } },
            'å’Œé‹ç§Ÿè»Š': { category: 'transport', type: 'ç§Ÿè»Š', cards: { cube: 0.03, richart: 0.033, dawho: true } },
            'æ ¼ä¸Šç§Ÿè»Š': { category: 'transport', type: 'ç§Ÿè»Š', cards: { cube: 0.03, richart: 0.033, dawho: true } },
            // è—¥å¦
            'å¯¶é›…': { category: 'drugstore', type: 'è—¥å¦', cards: { richart: 0.033, dawho: true } },
            'åº·æ˜¯ç¾': { category: 'drugstore', type: 'è—¥å¦', cards: { unicard: true, cube: 0.03, richart: 0.033, ubear: 0.03, dawho: true } },
            'å±ˆè‡£æ°': { category: 'drugstore', type: 'è—¥å¦', cards: { unicard: true, cube: 0.03, richart: 0.033, ubear: 0.03, dawho: true } },
            'æä¸€': { category: 'drugstore', type: 'è—¥å±€', aliases:['æä¸€é†«ç™‚'], cards: { richart: 0.033, dawho: true } },
            'å¤§æ¨¹è—¥å±€': { category: 'drugstore', type: 'è—¥å±€', cards: { unicard: true, richart: 0.033, dawho: true } },
            'ä¸ä¸è—¥å±€': { category: 'drugstore', type: 'è—¥å±€', cards: { unicard: true, richart: 0.033, dawho: true } },
            'ä½‘å…¨': { category: 'drugstore', type: 'è—¥å±€', aliases:['ä½‘å…¨ä¿å¥'], cards: { richart: 0.033, dawho: true } },
            'å¥åº·äººç”Ÿ': { category: 'drugstore', type: 'è—¥å±€', cards: { richart: 0.033, dawho: true } },

            // === 4. å¤§ç­†åˆ· (Richart 3.3%) ===
            'æ–°å…‰ä¸‰è¶Š': { category: 'department', type: 'ç™¾è²¨', cards: { richart: 0.038, unicard: true, cube: 0.03, dawho: true } },
            'é æ±ç™¾è²¨': { category: 'department', type: 'ç™¾è²¨', aliases:['å¤§é ç™¾'], cards: { unicard: true, cube: 0.03, richart: 0.033, dawho: true } },
            'SOGO': { category: 'department', type: 'ç™¾è²¨', aliases:['é æ±SOGO'], cards: { richart: 0.033, cube: 0.03, dawho: true } },
            'æ¼¢ç¥å·¨è›‹': { category: 'department', type: 'ç™¾è²¨', cards: { cube: 0.03, richart: 0.033, dawho: true } },
            'æ¼¢ç¥ç™¾è²¨': { category: 'department', type: 'ç™¾è²¨', cards: { unicard: true, cube: 0.03, richart: 0.033, dawho: true } },
            'å¾®é¢¨': { category: 'department', type: 'ç™¾è²¨', cards: { unicard: true, cube: 0.03, richart: 0.033, dawho: true } },
            'å°åŒ—101': { category: 'department', type: 'ç™¾è²¨', cards: { unicard: true, cube: 0.03, richart: 0.033, dawho: true } },
            'Big City': { category: 'department', type: 'å•†å ´', aliases:['é æ±å·¨åŸ'], cards: { cube: 0.03, richart: 0.033, dawho: true } },
            'å»£ä¸‰SOGO': { category: 'department', type: 'ç™¾è²¨', cards: { cube: 0.03, richart: 0.033, dawho: true } },
            'å—ç´¡': { category: 'department', type: 'å•†å ´', aliases:['å—ç´¡è³¼ç‰©ä¸­å¿ƒ'], cards: { cube: 0.03, richart: 0.033, dawho: true } },
            'èª å“ç”Ÿæ´»': { category: 'department', type: 'ç™¾è²¨', cards: { unicard: true, cube: 0.03, richart: 0.033, dawho: true } },
            'äº¬ç«™': { category: 'department', type: 'ç™¾è²¨', cards: { unicard: true, cube: 0.03, richart: 0.033, dawho: true } },
            'ä¸‰å‰µ': { category: 'department', type: 'å•†å ´', aliases:['ä¸‰å‰µç”Ÿæ´»'], cards: { richart: 0.033, dawho: true } },
            'å¤¢æ™‚ä»£': { category: 'department', type: 'å•†å ´', cards: { cube: 0.03, richart: 0.033, dawho: true } },
            'çµ±ä¸€æ™‚ä»£': { category: 'department', type: 'ç™¾è²¨', cards: { unicard: true, cube: 0.03, richart: 0.033, dawho: true } },
            'ä¸­å‹ç™¾è²¨': { category: 'department', type: 'ç™¾è²¨', cards: { cube: 0.03, richart: 0.033, dawho: true } },
            'LaLaport': { category: 'department', type: 'å•†å ´', cards: { unicard: true, cube: 0.03, richart: 0.033, dawho: true } },
            'MITSUI OUTLET': { category: 'department', type: 'Outlet', aliases:['ä¸‰äº•'], cards: { unicard: true, cube: 0.03, richart: 0.033, dawho: true } },
            'è¯æ³°åå“åŸ': { category: 'department', type: 'Outlet', cards: { unicard: true, cube: 0.03, richart: 0.033, dawho: true } },
            'SKM Park': { category: 'department', type: 'Outlet', cards: { cube: 0.03, richart: 0.033, dawho: true } },
            // å±…å®¶/æ™‚å°š
            'IKEA': { category: 'home', type: 'å±…å®¶', aliases:['å®œå®¶å®¶å±…'], cards: { unicard: true, cube: 0.02, richart: 0.038, dawho: true } },
            'ç‰¹åŠ›å±‹': { category: 'home', type: 'å±…å®¶', cards: { unicard: true, richart: 0.033, dawho: true } },
            'HOLA': { category: 'home', type: 'å±…å®¶', cards: { unicard: true, richart: 0.033, dawho: true } },
            'å®œå¾—åˆ©': { category: 'home', type: 'å±…å®¶', cards: { richart: 0.033, dawho: true } },
            'ç‘ªé»‘å®¶å±…': { category: 'home', type: 'å±…å®¶', cards: { richart: 0.033, dawho: true } },
            'UNIQLO': { category: 'fashion', type: 'æœé£¾', cards: { unicard: true, richart: 0.033, dawho: true, cube: 0.003 } },
            'GU': { category: 'fashion', type: 'æœé£¾', cards: { ubear: 0.03, richart: 0.033, dawho: true } },
            'ZARA': { category: 'fashion', type: 'æœé£¾', cards: { ubear: 0.03, richart: 0.033, dawho: true } },
            'NET': { category: 'fashion', type: 'æœé£¾', cards: { unicard: true, richart: 0.033, dawho: true } },
            'lululemon': { category: 'fashion', type: 'æœé£¾', cards: { richart: 0.033, dawho: true } },

            // === 5. å¥½é¥—åˆ· (Richart 3.3%) ===
            'åœ‹å…§é¤é£²': { category: 'food', type: 'é¤é£²', cards: { cube: 0.03, richart: 0.033, dawho: true } },
            'ç‹å“ç˜‹Pay': { category: 'food', type: 'é¤é£²', cards: { unicard: true, richart: 0.033, dawho: true } },
            'Uber Eats': { category: 'food', type: 'å¤–é€', cards: { unicard: true, cube: 0.03, richart: 0.033, ubear: 0.03, dawho: true } },
            'foodpanda': { category: 'food', type: 'å¤–é€', cards: { unicard: true, cube: 0.03, richart: 0.033, ubear: 0.03, dawho: true } },
            'ä¸­æ²¹': { category: 'gas', type: 'åŠ æ²¹', aliases:['å°ç£ä¸­æ²¹'], cards: { unicard: true, cube: 0.02, richart: 0.033, dawho: true } },
            'å°äº': { category: 'gas', type: 'åŠ æ²¹', cards: { richart: 0.033, dawho: true } },
            'å…¨åœ‹åŠ æ²¹': { category: 'gas', type: 'åŠ æ²¹', cards: { richart: 0.033, dawho: true } },
            'EVOASIS': { category: 'car', type: 'å……é›»', cards: { cube: 0.02, richart: 0.033, dawho: true } },
            'EVALUE': { category: 'car', type: 'å……é›»', cards: { cube: 0.02, richart: 0.033, dawho: true } },
            'æ‹“å…ƒ': { category: 'entertainment', type: 'å”®ç¥¨', aliases:['æ‹“å…ƒå”®ç¥¨'], cards: { ubear: 0.03, richart: 0.033, dawho: true } },
            'KKTIX': { category: 'entertainment', type: 'å”®ç¥¨', cards: { richart: 0.033, dawho: true } },
            'å¹´ä»£å”®ç¥¨': { category: 'entertainment', type: 'å”®ç¥¨', cards: { richart: 0.033, dawho: true } },
            'å¯¬å®å”®ç¥¨': { category: 'entertainment', type: 'å”®ç¥¨', cards: { richart: 0.033, dawho: true } },
            'OPENTIX': { category: 'entertainment', type: 'å”®ç¥¨', cards: { richart: 0.033, dawho: true } },
            'FunNow': { category: 'entertainment', type: 'é è¨‚', cards: { ubear: 0.01, richart: 0.033, dawho: true } },
            'éŒ¢æ«ƒ': { category: 'entertainment', type: 'KTV', cards: { richart: 0.033, dawho: true } },
            'å¥½æ¨‚è¿ª': { category: 'entertainment', type: 'KTV', cards: { richart: 0.033, dawho: true } },
            'ONCOR': { category: 'entertainment', type: 'KTV', cards: { richart: 0.033, dawho: true } },
            'sing!go': { category: 'entertainment', type: 'KTV', cards: { richart: 0.033, dawho: true } },
            'äº«æº«é¦¨': { category: 'entertainment', type: 'KTV', cards: { richart: 0.033, dawho: true } },
            'ç¾©å¤§': { category: 'entertainment', type: 'æ¨‚åœ’', aliases:['ç¾©å¤§éŠæ¨‚ä¸–ç•Œ'], cards: { richart: 0.033, dawho: true } },
            'éº—å¯¶': { category: 'entertainment', type: 'æ¨‚åœ’', aliases:['éº—å¯¶æ¨‚åœ’'], cards: { richart: 0.033, dawho: true } },
            'å…­ç¦æ‘': { category: 'entertainment', type: 'æ¨‚åœ’', cards: { richart: 0.033, dawho: true } },
            'ä¹æ—': { category: 'entertainment', type: 'æ¨‚åœ’', aliases:['ä¹æ—æ–‡åŒ–æ‘'], cards: { richart: 0.033, dawho: true } },
            'åŠæ¹–å±±': { category: 'entertainment', type: 'æ¨‚åœ’', cards: { richart: 0.033, dawho: true } },
            'X-Park': { category: 'entertainment', type: 'æ¨‚åœ’', cards: { richart: 0.033, dawho: true } },
            'æµ·ç”Ÿé¤¨': { category: 'entertainment', type: 'æ¨‚åœ’', aliases:['æµ·æ´‹ç”Ÿç‰©åšç‰©é¤¨'], cards: { richart: 0.033, dawho: true } },
            'é é›„æµ·æ´‹å…¬åœ’': { category: 'entertainment', type: 'æ¨‚åœ’', cards: { richart: 0.033, dawho: true } },
            'å°äººåœ‹': { category: 'entertainment', type: 'æ¨‚åœ’', cards: { richart: 0.033, dawho: true } },
            'æ™¶è¯': { category: 'hotel', type: 'ä½å®¿', cards: { richart: 0.033, dawho: true } },
            'é›²æœ—': { category: 'hotel', type: 'ä½å®¿', cards: { richart: 0.033, dawho: true } },
            'è¬è±ª': { category: 'hotel', type: 'ä½å®¿', cards: { richart: 0.033, dawho: true } },
            'ç…™æ³¢': { category: 'hotel', type: 'ä½å®¿', cards: { richart: 0.033, dawho: true } },
            'è€çˆº': { category: 'hotel', type: 'ä½å®¿', cards: { richart: 0.033, dawho: true } },
            'ç¦è¯': { category: 'hotel', type: 'ä½å®¿', cards: { richart: 0.033, dawho: true } },
            'æ¼¢ä¾†': { category: 'hotel', type: 'ä½å®¿', cards: { richart: 0.033, dawho: true } },
            'å›æ‚…': { category: 'hotel', type: 'ä½å®¿', cards: { richart: 0.033, dawho: true } },
            'æ´²éš›': { category: 'hotel', type: 'ä½å®¿', cards: { richart: 0.033, dawho: true } },
            'å¯’æ²': { category: 'hotel', type: 'ä½å®¿', cards: { richart: 0.033, dawho: true } },

            // === 6. å…¶ä»– (LINE Pay) ===
            'LINE Pay': { category: 'payment', type: 'è¡Œå‹•æ”¯ä»˜', cards: { unicard: true, richart: 0.023, cube: 0.02, ubear: 0.03, dawho: true } },
            'è¡—å£æ”¯ä»˜': { category: 'payment', type: 'è¡Œå‹•æ”¯ä»˜', cards: { unicard: true, cube: 0.02, dawho: true } },
            // é«˜é›„ä½å®¿ (CUBE 3.5%)
            'åŸå¸‚å•†æ—…': { category: 'hotel-ks', type: 'é«˜é›„ä½å®¿', cards: { cube: 0.035, richart: 0.033, dawho: true } },
            'å’Œé€¸é£¯åº—': { category: 'hotel-ks', type: 'é«˜é›„ä½å®¿', cards: { cube: 0.035, richart: 0.033, dawho: true } },
            'æ—…å±…æ–‡æ—…': { category: 'hotel-ks', type: 'é«˜é›„ä½å®¿', cards: { cube: 0.035, richart: 0.033, dawho: true } },
            'ç§èŠ¯æ—…åº—': { category: 'hotel-ks', type: 'é«˜é›„ä½å®¿', cards: { cube: 0.035, richart: 0.033, dawho: true } },
            'å¤å„ªæ—…å±…': { category: 'hotel-ks', type: 'é«˜é›„ä½å®¿', cards: { cube: 0.035, richart: 0.033, dawho: true } },
            'è¯åœ’å¤§é£¯åº—': { category: 'hotel-ks', type: 'é«˜é›„ä½å®¿', cards: { cube: 0.035, richart: 0.033, dawho: true } },
            'æ·çµ²æ—…': { category: 'hotel-ks', type: 'é«˜é›„ä½å®¿', cards: { cube: 0.035, richart: 0.033, dawho: true } },
            'éº—å°Šé…’åº—': { category: 'hotel-ks', type: 'é«˜é›„ä½å®¿', cards: { cube: 0.035, richart: 0.033, dawho: true } },
            'å¸•å¯éº—é…’åº—': { category: 'hotel-ks', type: 'é«˜é›„ä½å®¿', cards: { cube: 0.035, richart: 0.033, dawho: true } },
            'éˆæ€¡å¤§é£¯åº—': { category: 'hotel-ks', type: 'é«˜é›„ä½å®¿', cards: { cube: 0.035, richart: 0.033, dawho: true } },
        };

        const categories = [
            { id: 'all', name: 'å…¨éƒ¨', emoji: 'ğŸª' },
            { id: 'digital', name: 'AI/æ•¸ä½', emoji: 'ğŸ¤–' },
            { id: 'shopping', name: 'ç¶²è³¼/3C', emoji: 'ğŸ›ï¸' },
            { id: 'department', name: 'ç™¾è²¨/è—¥å¦', emoji: 'ğŸ¬' },
            { id: 'food', name: 'é¤é£²å¤–é€', emoji: 'ğŸ”' },
            { id: 'travel', name: 'æ—…éŠèˆªç©º', emoji: 'âœˆï¸' },
            { id: 'transport', name: 'äº¤é€šåŠ æ²¹', emoji: 'ğŸš•' },
            { id: 'supermarket', name: 'è¶…å•†é‡è²©', emoji: 'ğŸ›’' },
            { id: 'entertainment', name: 'å½±éŸ³å¨›æ¨‚', emoji: 'ğŸ®' },
            { id: 'course', name: 'ç·šä¸Šèª²ç¨‹', emoji: 'ğŸ“š' }
        ];

        let currentCategory = 'all';
        let currentTab = 'search';

        // === ç¨‹å¼åˆå§‹åŒ– ===
        function init() {
            renderCategories();
            renderCardOverview(); // æ–°å¢: æ¸²æŸ“æ¬Šç›Šç¸½è¦½

            const input = document.getElementById('searchMerchant');
            input.addEventListener('input', handleSearch); 
            input.addEventListener('focus', handleSearch); 
            
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.input-wrapper')) {
                    document.getElementById('suggestionDropdown').style.display = 'none';
                }
            });
            filterByCategory('all');
        }

        // === åˆ†é åˆ‡æ›é‚è¼¯ ===
        function switchTab(tabId) {
            currentTab = tabId;
            // æ›´æ–°æŒ‰éˆ•ç‹€æ…‹
            document.querySelectorAll('.nav-item').forEach(el => {
                el.classList.remove('active');
            });
            document.querySelector(`.nav-item[onclick="switchTab('${tabId}')"]`).classList.add('active');

            // æ›´æ–°å…§å®¹é¡¯ç¤º
            document.querySelectorAll('.tab-content').forEach(el => {
                el.classList.remove('active');
            });
            document.getElementById(`tab-${tabId}`).classList.add('active');
        }

        // === æ¸²æŸ“æ¬Šç›Šç¸½è¦½ (Accordion) ===
        function renderCardOverview() {
            const container = document.getElementById('cardOverviewContainer');
            const html = cardBenefitsData.map(card => `
                <div class="card-accordion-item">
                    <div class="accordion-header" onclick="toggleAccordion(this)">
                        <div class="card-title-row">
                            <span class="card-icon">${card.icon}</span>
                            <span class="card-title-text">${card.name}</span>
                        </div>
                        <span class="chevron">â–¼</span>
                    </div>
                    <div class="accordion-body">
                        <div class="benefit-row" style="background:#fffcec; border-bottom:1px dashed #e0e0e0;">
                            <div class="benefit-name" style="font-size:0.9em; color:#666;">â„¹ï¸ å¡ç‰‡å‚™è¨»</div>
                            <div class="benefit-desc">${card.note}</div>
                        </div>
                        ${card.benefits.map(b => `
                            <div class="benefit-row">
                                <div class="benefit-header">
                                    <span class="benefit-name">${b.name}</span>
                                    <span class="benefit-rate ${b.rate >= 0.035 ? 'high' : ''}">${(b.rate * 100).toFixed(1)}%</span>
                                </div>
                                <div class="benefit-desc">${b.desc}</div>
                                <div class="benefit-note">ğŸ’¡ ${b.note}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');
            container.innerHTML = html;
        }

        function toggleAccordion(header) {
            const body = header.nextElementSibling;
            const isOpen = body.classList.contains('open');
            
            // é—œé–‰å…¶ä»–å·²å±•é–‹çš„ (å¦‚æœæƒ³è¦æ‰‹é¢¨ç´æ•ˆæœ)
            // document.querySelectorAll('.accordion-body').forEach(el => {
            //     el.classList.remove('open');
            //     el.previousElementSibling.classList.remove('active');
            // });

            if (!isOpen) {
                body.classList.add('open');
                header.classList.add('active');
            } else {
                body.classList.remove('open');
                header.classList.remove('active');
            }
        }

        // ... [ä¿ç•™åŸæœ¬çš„ getPlanSuggestion, calculateCardMetrics, renderCategories, filterByCategory, handleSearch ç­‰æ ¸å¿ƒå‡½æ•¸] ...
        // (ç‚ºäº†ç‰ˆé¢æ•´æ½”ï¼Œé€™äº›å‡½æ•¸èˆ‡ä¸Šä¸€ç‰ˆç›¸åŒï¼Œè«‹ç¢ºä¿åœ¨å®Œæ•´æª”æ¡ˆä¸­åŒ…å«å®ƒå€‘)
        
        // [æ­¤è™•æ’å…¥åŸæœ‰çš„ getPlanSuggestion å‡½æ•¸]
        function getPlanSuggestion(cardKey, category, merchantName, type) {
            if (cardKey === 'richart') {
                if (merchantName.includes('LINE Pay')) return 'LINE Pay (2.3%)';
                const payList = ['7-11', 'å…¨å®¶', 'IKEA', 'æ–°å…‰ä¸‰è¶Š', 'å°ç£å¤§è»ŠéšŠ', 'å¤§æ½¤ç™¼'];
                if (payList.some(k => merchantName.includes(k))) return 'ç¶å®šå°æ–°Pay (Payè‘—åˆ·)';
                if (merchantName === 'Uber') return 'åœ‹å…§:å¤©å¤©åˆ· / åœ‹å¤–:ç©æ—…åˆ·';
                if (category === 'digital' || type === 'ç¶²è³¼' || type === 'AIå·¥å…·' || type === 'å½±éŸ³' || type === 'éŠæˆ²' || category === 'course') return 'åˆ‡æ›ï¼šæ•¸è¶£åˆ·';
                if (category === 'travel' || category === 'airline' || category === 'overseas' || type === 'æµ·å¤–äº¤é€š' || type === 'è¨‚æˆ¿') return 'åˆ‡æ›ï¼šç©æ—…åˆ·';
                if (category === 'supermarket' || merchantName.includes('å°éµ') || merchantName.includes('é«˜éµ') || type === 'äº¤é€š' || type === 'ç§Ÿè»Š' || type === 'è—¥å¦' || type === 'è—¥å±€' || category === 'car') return 'åˆ‡æ›ï¼šå¤©å¤©åˆ·';
                if (category === 'department' || type === 'æœé£¾' || type === 'å±…å®¶' || type === 'Outlet') return 'åˆ‡æ›ï¼šå¤§ç­†åˆ·';
                if (category === 'food' || category === 'gas' || type === 'æ¨‚åœ’' || type === 'KTV' || type === 'å”®ç¥¨') return 'åˆ‡æ›ï¼šå¥½é¥—åˆ·';
                if (merchantName.includes('Uber Eats') || merchantName.includes('foodpanda')) return 'åˆ‡æ›ï¼šå¥½é¥—åˆ·';
                return 'è«‹ç¢ºèªAPPæ¬Šç›Š';
            }
            if (cardKey === 'cube') {
                const crazyList = ['é«˜éµ', 'å°éµ', 'å°ç£é«˜éµ', 'å°ç£éµè·¯', 'Klook'];
                if (category === 'hotel-ks' || crazyList.some(k => merchantName.includes(k))) return 'åˆ‡æ›ï¼šç˜‹å¤§æ¸¯ (3.5%)';
                const essentialList = ['IKEA', 'å…¨è¯', 'å®¶æ¨‚ç¦', '7-11', 'å…¨å®¶', 'ä¸­æ²¹', 'LOPIA', 'è»Šéº»å‰', 'U-POWER', 'EVOASIS'];
                if (essentialList.some(k => merchantName.includes(k))) return 'åˆ‡æ›ï¼šé›†ç²¾é¸';
                if (category === 'digital' || type === 'AIå·¥å…·' || type === 'ç¶²è³¼' || type === 'å½±éŸ³') return 'åˆ‡æ›ï¼šç©æ•¸ä½';
                if (category === 'department' || category === 'drugstore' || category === 'food' || merchantName.includes('éº¥ç•¶å‹')) return 'åˆ‡æ›ï¼šæ¨‚éŸ¿è³¼';
                if (category === 'travel' || category === 'airline' || type === 'äº¤é€š' || category === 'overseas' || category === 'hotel') return 'åˆ‡æ›ï¼šè¶£æ—…è¡Œ';
                return 'è«‹ç¢ºèªAPPæ¬Šç›Š';
            }
            return null;
        }

        // [æ­¤è™•æ’å…¥åŸæœ‰çš„ calculateCardMetrics å‡½æ•¸]
        function calculateCardMetrics(cardKey, dbValue, category, merchantName, type) {
            const cardInfo = cardData[cardKey];
            let displayRate = 0;
            let details = [];
            let planName = null;

            if (cardKey === 'richart') {
                if (['7-11', 'å…¨å®¶', 'IKEA', 'æ–°å…‰ä¸‰è¶Š', 'å°ç£å¤§è»ŠéšŠ'].some(k => merchantName.includes(k)) && dbValue !== 0.023) {
                     displayRate = 0.038;
                } else if (typeof dbValue === 'number') {
                     displayRate = dbValue;
                } else {
                     displayRate = 0.003;
                }
                planName = getPlanSuggestion(cardKey, category, merchantName, type);
                if (planName) details.push(`<span class="plan-alert">âš ï¸ ${planName}</span>`);
            }
            else if (cardKey === 'unicard') {
                if (dbValue === true) {
                    displayRate = 0.045; 
                    details = cardInfo.plansDetails;
                } else {
                    displayRate = 0.01; 
                    details.push('éæŒ‡å®šé€šè·¯ï¼šåŸºæœ¬å›é¥‹');
                }
            } 
            else if (cardKey === 'dawho') {
                displayRate = 0.035; 
                details.push('åœ‹å…§æ¶ˆè²»çµ±ä¸€ 3.5%');
            }
            else if (cardKey === 'ubear') {
                if (dbValue) displayRate = dbValue; else displayRate = 0.01;
                if (displayRate === 0.10) details.push('æŒ‡å®šå¨›æ¨‚ 10%');
                if (displayRate === 0.03) details.push('ç¶²è³¼/è¡Œå‹•æ”¯ä»˜ 3%');
            }
            else if (cardKey === 'cube') {
                if (typeof dbValue === 'number') displayRate = dbValue; else displayRate = 0.003;
                planName = getPlanSuggestion(cardKey, category, merchantName, type);
                if (planName) details.push(`<span class="plan-alert">âš ï¸ ${planName}</span>`);
            }

            return {
                rate: displayRate,
                name: cardInfo.name,
                details: details,
                planName: planName
            };
        }

        function renderCategories() {
            const html = categories.map(c => 
                `<div class="category-tag ${c.id === 'all' ? 'active' : ''}" 
                      onclick="filterByCategory('${c.id}')">${c.emoji} ${c.name}</div>`
            ).join('');
            document.getElementById('categoryTags').innerHTML = html;
        }

        function filterByCategory(catId) {
            currentCategory = catId;
            document.querySelectorAll('.category-tag').forEach(el => {
                el.classList.toggle('active', el.textContent.includes(categories.find(c=>c.id===catId).name));
            });
            const results = [];
            Object.entries(merchantDatabase).forEach(([name, info]) => {
                if (catId === 'all' || info.category === catId || (catId === 'hotel-ks' && info.category === 'hotel-ks') || (catId === 'course' && info.category === 'course')) {
                    results.push({ name, ...info });
                }
            });
            renderResults(results);
        }

        function handleSearch(e) {
            const val = e.target.value.trim().toLowerCase();
            document.getElementById('clearSearch').style.display = val ? 'flex' : 'none';
            if (!val) {
                document.getElementById('suggestionDropdown').style.display = 'none';
                filterByCategory(currentCategory);
                return;
            }
            const matches = [];
            Object.entries(merchantDatabase).forEach(([name, info]) => {
                let hit = name.toLowerCase().includes(val);
                if (info.aliases) hit = hit || info.aliases.some(a => a.toLowerCase().includes(val));
                if (hit) matches.push({ name, ...info });
            });
            const dropdown = document.getElementById('suggestionDropdown');
            if (matches.length > 0 && matches.length < 8) {
                dropdown.innerHTML = matches.map(m => 
                    `<div class="suggestion-item" onclick="selectMerchant('${m.name}')">
                        ${m.name.replace(new RegExp(val, 'gi'), '<span class="highlight">$&</span>')} 
                        <span style="font-size:0.8em; color:#999">(${m.type})</span>
                    </div>`
                ).join('');
                dropdown.style.display = 'block';
            } else {
                dropdown.style.display = 'none';
            }
            renderResults(matches);
        }

        function clearSearch() {
            const input = document.getElementById('searchMerchant');
            input.value = '';
            input.focus();
            document.getElementById('clearSearch').style.display = 'none';
            document.getElementById('suggestionDropdown').style.display = 'none';
            filterByCategory(currentCategory);
        }

        function selectMerchant(name) {
            document.getElementById('searchMerchant').value = name;
            document.getElementById('suggestionDropdown').style.display = 'none';
            const info = merchantDatabase[name];
            renderResults([{ name, ...info }]);
        }

        function renderResults(list) {
            const container = document.getElementById('merchantContainer');
            if (list.length === 0) {
                container.innerHTML = '<div style="text-align:center; padding:40px; color:#999">æ‰¾ä¸åˆ°ç›¸é—œé€šè·¯</div>';
                return;
            }

            container.innerHTML = list.map(item => {
                const cards = Object.entries(item.cards).map(([key, value]) => {
                    return calculateCardMetrics(key, value, item.category, item.name, item.type);
                }).sort((a, b) => b.rate - a.rate);

                const bestCard = cards[0];
                const badgeHTML = cards.slice(0, 3).map((c, idx) => 
                    `<span class="card-badge ${idx === 0 ? 'best' : ''}">
                        ${c.name} ${(c.rate * 100).toFixed(1)}%
                    </span>`
                ).join('');

                return `
                    <div class="merchant-list" onclick="openDetailModal('${item.name}')">
                        <div class="merchant-header">
                            <span class="merchant-name">${item.name}</span>
                            <span class="merchant-type">${item.type}</span>
                        </div>
                        <div class="card-badges-row">${badgeHTML}</div>
                        <div class="best-tip">
                            ğŸ’¡ æœ€é«˜ï¼š${bestCard.name} 
                            ${bestCard.planName ? `<span class="plan-hint">(${bestCard.planName.split('ï¼š')[1] || bestCard.planName})</span>` : ''} 
                            ${(bestCard.rate * 100).toFixed(1)}%
                            <span style="margin-left:auto; color:#2180a0;">æŸ¥çœ‹è©³æƒ… â†’</span>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function openDetailModal(name) {
            const info = merchantDatabase[name];
            document.getElementById('modalTitle').innerText = name;
            document.getElementById('modalType').innerText = info.type;

            const cards = Object.entries(info.cards).map(([key, value]) => {
                return calculateCardMetrics(key, value, info.category, name, info.type);
            }).sort((a, b) => b.rate - a.rate);

            const html = cards.map((c, idx) => {
                const isBest = idx === 0;
                return `
                    <div class="detail-card-item ${isBest ? 'best-card' : ''}">
                        <div class="detail-card-header">
                            <span>${isBest ? 'ğŸ† ' : ''}${c.name}</span>
                            <span style="${isBest ? 'color:#237804' : ''}">${isBest ? 'æœ€åˆ’ç®—' : ''}</span>
                        </div>
                        <div class="detail-card-body">
                            <div class="rate-row">
                                <span style="color:#666">å›é¥‹ç‡</span>
                                <span class="rate-val" style="color:${isBest ? 'var(--color-success)' : 'var(--color-primary)'}">${(c.rate * 100).toFixed(1)}%</span>
                            </div>
                            
                            ${c.details.length ? `
                                <div class="detail-plan-info">
                                    ${c.details.map(d => `<div style="margin-bottom:4px;">â€¢ ${d}</div>`).join('')}
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;
            }).join('');
            
            document.getElementById('detailBody').innerHTML = html;
            document.getElementById('detailModal').classList.add('show');
        }

        function closeDetailModal() {
            document.getElementById('detailModal').classList.remove('show');
        }

        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
